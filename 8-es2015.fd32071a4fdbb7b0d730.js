(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{cGZY:function(t,e,a){"use strict";a.r(e),a.d(e,"DataQualityFeedbackModule",function(){return St});var i=a("ofXK"),n=a("tyNb"),c=a("3Pt+"),s=a("1kSV"),o=a("e/9f"),r=a("LRne"),d=a("JIr8"),f=a("fXoL"),l=a("tk/3"),b=a("SF6U");let g=(()=>{class t{constructor(t,e){this.http=t,this.logger=e,this.urlApiIatiFile=window.__env.apiDataworkBench+"/iati-files",this.urlApiIatiTestFile=window.__env.apiDataworkBench+"/iati-testfiles",this.urlApiIatiDataSet=window.__env.apiDataworkBench+"/iati-datasets",this.urlApiOrganisation=window.__env.apiDataworkBench+"/iati-publishers"}getDataQualityFeedback(t){return this.http.get(this.urlApiIatiFile+"/file/json/"+t+".json").pipe(Object(d.a)(this.handleError("getIatiFile",void 0)))}getTestFilesDataQualityFeedbackById(t){return this.http.get(this.urlApiIatiTestFile+"/file/json/"+t+".json").pipe(Object(d.a)(this.handleError("getIatiFile",void 0)))}getReportInfo(t){const e={organisationName:"",fileName:"",organisationSlug:""};return this.http.get(this.urlApiIatiDataSet+"/findOne/?filter[where][id]="+t).subscribe(t=>{e.fileName=t.filename,e.organisationSlug=t.publisher,this.http.get(this.urlApiOrganisation+"/findOne/?filter[where][slug]="+t.publisher).subscribe(t=>(e.organisationName=t.name,Object(r.a)(e)))}),Object(r.a)(e)}getSeverities(){return[{id:"critical",slug:"critical",name:"Critical",description:"Files with critical errors will not be processed by the datastore",count:null,order:1,show:!0,types:[]},{id:"error",slug:"danger",name:"Errors",description:"Errors make it hard or impossible to use the data.",count:null,order:2,show:!0,types:[]},{id:"warning",slug:"warning",name:"Warnings",description:"Warnings indicate where the data can be more valuable.",count:null,order:3,show:!0,types:[]},{id:"improvement",slug:"info",name:"Improvements",description:"Improvements can make the data more useful.",count:null,order:4,show:!0,types:[]},{id:"notification",slug:"success",name:"Notifications",description:"Notifications are for your information.",count:null,order:5,show:!0,types:[]}]}getSources(){return[{id:"iati",slug:"iati",name:"IATI Standard",count:null,order:1,show:!0},{id:"minbuza",slug:"minbuza",name:"Netherlands: Ministry of Foreign Affairs additional rules",count:null,order:2,show:!0},{id:"dfid",slug:"dfid",name:"UK: Department for International Development (DFID) additional rules",count:null,order:3,show:!0},{id:"practice",slug:"practice",name:"Common practice",count:null,order:4,show:!0},{id:"iati-doc",slug:"iati-doc",name:"IATI Standard (additional)",count:null,order:5,show:!0}]}handleError(t="operation",e){return t=>(this.logger.error(t),Object(r.a)(e))}}return t.\u0275fac=function(e){return new(e||t)(f.Xb(l.a),f.Xb(b.a))},t.\u0275prov=f.Hb({token:t,factory:t.\u0275fac}),t})();var u=a("XQMz"),p=a("Gl80"),h=a("b6Gx");function m(t,e){if(1&t&&f.Mb(0,"span",2),2&t){const t=f.cc();f.kc("title","IATI-Rules version: ",t.data.schemaVersion,"")}}function y(t,e){if(1&t&&(f.Qb(0,"span"),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.yc("IATI version: ",t.data.iatiVersion,"")}}function v(t,e){if(1&t&&(f.Qb(0,"span"),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.yc(" | Type: ",t.data.filetype,"")}}function k(t,e){if(1&t&&(f.Qb(0,"span"),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.yc(" | updated: ",t.data.feedbackUpdated,"")}}let w=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-iati-info"]],inputs:{data:"data"},decls:7,vars:5,consts:[[3,"title",4,"ngIf"],[4,"ngIf"],[3,"title"]],template:function(t,e){1&t&&(f.Qb(0,"h3"),f.wc(1),f.Pb(),f.Qb(2,"p"),f.uc(3,m,1,1,"span",0),f.uc(4,y,2,1,"span",1),f.uc(5,v,2,1,"span",1),f.uc(6,k,2,1,"span",1),f.Pb()),2&t&&(f.yb(1),f.xc(e.data.filename),f.yb(2),f.ic("ngIf",e.data.schemaVersion),f.yb(1),f.ic("ngIf",e.data.iatiVersion),f.yb(1),f.ic("ngIf",e.data.filetype),f.yb(1),f.ic("ngIf",e.data.feedbackUpdated))},directives:[i.l],styles:[""]}),t})();const C=function(t){return["/organisation",t]};let U=(()=>{class t{constructor(t,e){this.dataQualityFeedbackService=t,this.logger=e,this.id="",this.reportInfo={organisationName:"",fileName:"",organisationSlug:""}}ngOnInit(){this.loadData(this.id)}loadData(t){this.dataQualityFeedbackService.getReportInfo(t).subscribe(t=>{this.reportInfo=t})}}return t.\u0275fac=function(e){return new(e||t)(f.Lb(g),f.Lb(b.a))},t.\u0275cmp=f.Fb({type:t,selectors:[["app-main-report-info"]],inputs:{id:"id"},decls:4,vars:5,consts:[[3,"routerLink"]],template:function(t,e){1&t&&(f.Qb(0,"h3"),f.Qb(1,"a",0),f.wc(2),f.Pb(),f.wc(3),f.Pb()),2&t&&(f.yb(1),f.ic("routerLink",f.lc(3,C,e.reportInfo.organisationSlug)),f.yb(1),f.xc(e.reportInfo.organisationName),f.yb(1),f.yc(" - ",e.reportInfo.fileName," "))},directives:[n.f],styles:[""]}),t})();var P=a("f3yp");const M=["*"];let I=(()=>{class t{constructor(){this.checked=!1,this.checkedChange=new f.n,this.name=""}ngOnInit(){}checkedChanged(){this.checkedChange.emit(this.checked)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-checkbox"]],inputs:{checked:"checked",name:"name"},outputs:{checkedChange:"checkedChange"},ngContentSelectors:M,decls:4,vars:4,consts:[[1,"custom-control","custom-checkbox","d-inline"],["type","checkbox",1,"custom-control-input",3,"ngModel","ngModelChange","change"],[1,"custom-control-label"]],template:function(t,e){1&t&&(f.hc(),f.Qb(0,"div",0),f.Qb(1,"input",1),f.ac("ngModelChange",function(t){return e.checked=t})("change",function(){return e.checkedChanged()}),f.Pb(),f.Qb(2,"label",2),f.gc(3),f.Pb(),f.Pb()),2&t&&(f.yb(1),f.ic("ngModel",e.checked),f.zb("id",e.name)("name",e.name),f.yb(1),f.zb("for",e.name))},directives:[c.a,c.j,c.l],styles:[""]}),t})();const O=function(t){return{unselected:t}};function x(t,e){if(1&t){const t=f.Rb();f.Qb(0,"li",1),f.Qb(1,"span",2),f.wc(2),f.Pb(),f.Qb(3,"span",3),f.wc(4),f.Pb(),f.Qb(5,"span",4),f.Qb(6,"app-checkbox",5),f.ac("checkedChange",function(e){return f.qc(t),f.cc().typeMessage.show=e})("checkedChange",function(){return f.qc(t),f.cc().selectionChanged()}),f.Pb(),f.Pb(),f.Pb()}if(2&t){const t=f.cc();f.yb(2),f.yc("",t.typeMessage.count," x"),f.yb(1),f.ic("ngClass",f.lc(5,O,!(null!=t.typeMessage&&t.typeMessage.show))),f.yb(1),f.xc(t.typeMessage.text),f.yb(2),f.ic("checked",t.typeMessage.show)("name","filterTypeMsg"+t.typeMessage.text+t.typeMessage.id)}}let Q=(()=>{class t{constructor(){this.selectedChanged=new f.n}ngOnInit(){}selectionChanged(){console.log("typeMessage: ",this.typeMessage),this.selectedChanged.emit("")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-filter-type-message"]],inputs:{typeMessage:"typeMessage"},outputs:{selectedChanged:"selectedChanged"},decls:1,vars:1,consts:[["class","list-group-item",4,"ngIf"],[1,"list-group-item"],[1,"severity-count"],[3,"ngClass"],[1,"select"],[3,"checked","name","checkedChange"]],template:function(t,e){1&t&&f.uc(0,x,7,7,"li",0),2&t&&f.ic("ngIf",e.typeMessage)},directives:[i.l,i.j,I],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.filter[_ngcontent-%COMP%]{margin-bottom:20px}.list-group-item[_ngcontent-%COMP%]{background-color:inherit}.severity-count[_ngcontent-%COMP%]{display:inline-block;min-width:28px;margin-right:6px;text-align:right}.caption[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03)}.title[_ngcontent-%COMP%]{font-weight:700;display:inline}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}.select[_ngcontent-%COMP%]{margin-right:-10px;float:right}.unselected[_ngcontent-%COMP%]{text-decoration:line-through}'],changeDetection:0}),t})();function _(t,e){if(1&t&&(f.Qb(0,"span",12),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.zc(" (",t.totalTypesSelected()," of ",t.totalTypes()," messages selected.) ")}}function F(t,e){1&t&&(f.Qb(0,"span"),f.Mb(1,"img",13),f.Pb())}function E(t,e){1&t&&(f.Qb(0,"span"),f.Mb(1,"img",14),f.Pb())}function D(t,e){if(1&t){const t=f.Rb();f.Qb(0,"span",17),f.Qb(1,"button",18),f.ac("click",function(){return f.qc(t),f.cc(2).unSelectAll()}),f.wc(2,"Unselect all"),f.Pb(),f.Pb()}}function S(t,e){if(1&t){const t=f.Rb();f.Qb(0,"span",17),f.Qb(1,"button",18),f.ac("click",function(){return f.qc(t),f.cc(2).selectAll()}),f.wc(2,"Select all"),f.Pb(),f.Pb()}}function R(t,e){if(1&t&&(f.Qb(0,"li",15),f.wc(1),f.uc(2,D,3,0,"span",16),f.uc(3,S,3,0,"span",16),f.Pb()),2&t){const t=f.cc();f.yb(1),f.yc(" ",t.severity.description," "),f.yb(1),f.ic("ngIf",t.allSelected()),f.yb(1),f.ic("ngIf",!t.allSelected())}}function q(t,e){if(1&t){const t=f.Rb();f.Qb(0,"app-filter-type-message",19),f.ac("selectedChanged",function(){return f.qc(t),f.cc().selectionChanged()}),f.Pb()}2&t&&f.ic("typeMessage",e.$implicit)}const T=function(t){return{hidden:t}};let A=(()=>{class t{constructor(){this.selectedChanged=new f.n,this.isCollapsed=!0}ngOnInit(){}collapse(){this.isCollapsed=!this.isCollapsed}allSelected(){return this.severity.types.every(t=>!0===t.show)}selectionChanged(){this.selectedChanged.emit("")}selectAll(){this.severity.types.forEach(t=>t.show=!0),this.selectionChanged()}unSelectAll(){this.severity.types.forEach(t=>t.show=!1),this.selectionChanged()}totalTypes(){return this.severity.types.length}totalTypesSelected(){let t=0;return this.severity.types.forEach(e=>{!0===e.show&&t++}),t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-filter-severity-item"]],inputs:{severity:"severity"},outputs:{selectedChanged:"selectedChanged"},decls:14,vars:14,consts:[[1,"list-group-item",3,"className","ngClass"],[1,"severity-heading","row"],[1,"col","title-col",3,"click"],["ngClass","{'unselected':!severity.show}"],["class","badge badge-light text-danger float-right messages-selected-count",4,"ngIf"],[1,"col-auto","collapse-col"],[3,"checked","name","checkedChange"],["type","button",1,"btn","btn-outline-light","collapser",3,"click"],[4,"ngIf"],[1,"type-messages",3,"ngbCollapse"],["class","list-group-item filter-row",4,"ngIf"],[3,"typeMessage","selectedChanged",4,"ngFor","ngForOf"],[1,"badge","badge-light","text-danger","float-right","messages-selected-count"],["src","assets/icons/arrow_down_24_white.svg","alt","icon arrow down"],["src","assets/icons/arrow_up_24_white.svg","alt","icon arrow up"],[1,"list-group-item","filter-row"],["class","show-label",4,"ngIf"],[1,"show-label"],["type","button",1,"btn","btn-link",3,"click"],[3,"typeMessage","selectedChanged"]],template:function(t,e){1&t&&(f.Qb(0,"li",0),f.Qb(1,"div",1),f.Qb(2,"div",2),f.ac("click",function(){return e.collapse()}),f.Qb(3,"span",3),f.wc(4),f.Pb(),f.uc(5,_,2,2,"span",4),f.Pb(),f.Qb(6,"div",5),f.Qb(7,"app-checkbox",6),f.ac("checkedChange",function(t){return e.severity.show=t})("checkedChange",function(){return e.selectionChanged()}),f.Pb(),f.Qb(8,"button",7),f.ac("click",function(){return e.collapse()}),f.uc(9,F,2,0,"span",8),f.uc(10,E,2,0,"span",8),f.Pb(),f.Pb(),f.Pb(),f.Pb(),f.Qb(11,"div",9),f.uc(12,R,4,3,"li",10),f.uc(13,q,1,1,"app-filter-type-message",11),f.Pb()),2&t&&(f.ic("className","list-group-item "+e.severity.id)("ngClass",f.lc(12,T,0===e.severity.types.length)),f.yb(4),f.zc(" ",e.severity.name,": ",e.severity.types.length," types"),f.yb(1),f.ic("ngIf",!e.allSelected()),f.yb(2),f.ic("checked",e.severity.show)("name","filterSrc"+e.severity.name),f.yb(2),f.ic("ngIf",!e.isCollapsed),f.yb(1),f.ic("ngIf",e.isCollapsed),f.yb(1),f.ic("ngbCollapse",e.isCollapsed),f.yb(1),f.ic("ngIf",0!==e.severity.types.length),f.yb(1),f.ic("ngForOf",e.severity.types))},directives:[i.j,i.l,I,s.a,i.k,Q],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.critical[_ngcontent-%COMP%]{background-color:#a66ee9;color:#fff}.error[_ngcontent-%COMP%]{background-color:#f73357;color:#fff}.warning[_ngcontent-%COMP%]{background-color:#ff7264;color:#fff}.improvement[_ngcontent-%COMP%]{background-color:#06dbe4;color:#fff}.notification[_ngcontent-%COMP%]{background-color:#18bc9c;color:#fff}.severity-count[_ngcontent-%COMP%]{display:inline-block;min-width:28px;margin-right:6px;text-align:right}.select[_ngcontent-%COMP%]{margin-right:-10px;float:right}.unselected[_ngcontent-%COMP%]{text-decoration:line-through}.hidden[_ngcontent-%COMP%]{display:none}.title-col[_ngcontent-%COMP%]{cursor:pointer}.btn.collapser[_ngcontent-%COMP%]{margin-left:12px;padding:0;line-height:1;text-shadow:none;opacity:.7;border-style:none}.btn.collapser[_ngcontent-%COMP%]:hover{background-color:inherit}.btn.collapser.focus[_ngcontent-%COMP%], .btn.collapser[_ngcontent-%COMP%]:focus{box-shadow:none}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}.filter-row[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03);color:#95a5a6}.messages-selected-count[_ngcontent-%COMP%]{margin-left:12px;padding:6px}']}),t})();function L(t,e){if(1&t){const t=f.Rb();f.Qb(0,"app-filter-severity-item",6),f.ac("selectedChanged",function(){return f.qc(t),f.cc().selectionChanged()}),f.Pb()}2&t&&f.ic("severity",e.$implicit)}let B=(()=>{class t{constructor(){this.severities=[],this.selectedChanged=new f.n}ngOnInit(){}allSelected(){return this.severities.every(t=>!0===t.show)}selectionChanged(){this.selectedChanged.emit("")}selectAll(){this.severities.forEach(t=>t.show=!0),this.selectionChanged()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-filter-severity"]],inputs:{severities:"severities"},outputs:{selectedChanged:"selectedChanged"},decls:8,vars:1,consts:[[1,"filter"],[1,"list-group"],[1,"list-group-item","caption"],[1,"title"],[1,"show-label","text-muted"],[3,"severity","selectedChanged",4,"ngFor","ngForOf"],[3,"severity","selectedChanged"]],template:function(t,e){1&t&&(f.Qb(0,"div",0),f.Qb(1,"ul",1),f.Qb(2,"li",2),f.Qb(3,"div",3),f.wc(4,"View by message type"),f.Pb(),f.Qb(5,"span",4),f.wc(6,"Click to show or hide individual message types."),f.Pb(),f.Pb(),f.uc(7,L,1,1,"app-filter-severity-item",5),f.Pb(),f.Pb()),2&t&&(f.yb(7),f.ic("ngForOf",e.severities))},directives:[i.k,A],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.filter[_ngcontent-%COMP%]{margin-bottom:20px;background-color:rgba(0,0,0,.03)}.list-group-item[_ngcontent-%COMP%]{background-color:inherit}.caption[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03)}.title[_ngcontent-%COMP%]{font-weight:700;display:inline}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}']}),t})();function N(t,e){if(1&t){const t=f.Rb();f.Qb(0,"span",6),f.Qb(1,"button",7),f.ac("click",function(){return f.qc(t),f.cc().selectAll()}),f.wc(2,"Select all"),f.Pb(),f.Pb()}}const K=function(t){return{unselected:t}};function z(t,e){if(1&t){const t=f.Rb();f.Qb(0,"li",8),f.Qb(1,"span",9),f.wc(2),f.Pb(),f.Qb(3,"span",10),f.wc(4),f.Pb(),f.Qb(5,"span",11),f.Qb(6,"app-checkbox",12),f.ac("checkedChange",function(t){return e.$implicit.show=t})("checkedChange",function(){return f.qc(t),f.cc().selectionChanged()}),f.Pb(),f.Pb(),f.Pb()}if(2&t){const t=e.$implicit;f.yb(2),f.yc("",t.count," x"),f.yb(1),f.ic("ngClass",f.lc(5,K,!t.show)),f.yb(1),f.xc(t.name),f.yb(2),f.ic("checked",t.show)("name","filterCat"+t.name)}}let j=(()=>{class t{constructor(){this.categories=[],this.selectedChanged=new f.n}ngOnInit(){}allSelected(){return this.categories.every(t=>!0===t.show)}selectionChanged(){this.selectedChanged.emit("")}selectAll(){this.categories.forEach(t=>t.show=!0),this.selectionChanged()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-filter-category"]],inputs:{categories:"categories"},outputs:{selectedChanged:"selectedChanged"},decls:7,vars:2,consts:[[1,"filter"],[1,"list-group"],[1,"list-group-item","caption"],[1,"title"],["class","show-label",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"show-label"],["type","button",1,"btn","btn-link",3,"click"],[1,"list-group-item"],[1,"severity-count"],[3,"ngClass"],[1,"select"],[3,"checked","name","checkedChange"]],template:function(t,e){1&t&&(f.Qb(0,"div",0),f.Qb(1,"ul",1),f.Qb(2,"li",2),f.Qb(3,"div",3),f.wc(4,"View by category"),f.Pb(),f.uc(5,N,3,0,"span",4),f.Pb(),f.uc(6,z,7,7,"li",5),f.Pb(),f.Pb()),2&t&&(f.yb(5),f.ic("ngIf",!e.allSelected()),f.yb(1),f.ic("ngForOf",e.categories))},directives:[i.l,i.k,i.j,I],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.filter[_ngcontent-%COMP%]{margin-bottom:20px;background-color:rgba(0,0,0,.03)}.list-group-item[_ngcontent-%COMP%]{background-color:inherit}.severity-count[_ngcontent-%COMP%]{display:inline-block;min-width:28px;margin-right:6px;text-align:right}.caption[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03)}.title[_ngcontent-%COMP%]{font-weight:700;display:inline}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}.select[_ngcontent-%COMP%]{margin-right:-10px;float:right}.unselected[_ngcontent-%COMP%]{text-decoration:line-through}']}),t})();function $(t,e){if(1&t&&(f.Qb(0,"span"),f.Qb(1,"a",9),f.wc(2,"(see guidance)"),f.Pb(),f.Pb()),2&t){const t=e.$implicit;f.yb(1),f.jc("href",t.src,f.rc),f.ic("hidden",null==t.src)}}function J(t,e){if(1&t&&(f.Qb(0,"li",10),f.wc(1),f.Pb()),2&t){const t=e.$implicit;f.yb(1),f.xc(t.text)}}function V(t,e){if(1&t&&(f.Qb(0,"li"),f.Qb(1,"span",4),f.wc(2),f.Pb(),f.Qb(3,"span",5),f.wc(4),f.uc(5,$,3,2,"span",6),f.Pb(),f.Qb(6,"ul",7),f.uc(7,J,2,1,"li",8),f.Pb(),f.Pb()),2&t){const t=e.$implicit,a=f.cc();f.Bb("message ",a.getfeedbackColor(t),""),f.yb(2),f.xc(t.text),f.yb(2),f.yc(" ",t.id," "),f.yb(1),f.ic("ngForOf",t.rulesets),f.yb(1),f.ic("hidden",1===t.context.length&&""===t.context[0].text),f.yb(1),f.ic("ngForOf",t.context)}}let G=(()=>{class t{constructor(){this.sortData=()=>{this.feedback.messages.sort(this.compareSeverity)},this.compareSeverity=(t,e)=>this.getSeverity(t)-this.getSeverity(e),this.getSeverity=t=>t.rulesets.some(t=>"critical"===t.severity)?1:t.rulesets.some(t=>"danger"===t.severity)||t.rulesets.some(t=>"warning"===t.severity)?2:t.rulesets.some(t=>"info"===t.severity)?3:t.rulesets.some(t=>"success"===t.severity)?4:9}ngOnInit(){this.sortData()}getfeedbackColor(t){return t.rulesets.some(t=>"danger"===t.severity)?"error":t.rulesets.some(t=>"critical"===t.severity)?"critical":t.rulesets.some(t=>"warning"===t.severity)?"warning":t.rulesets.some(t=>"info"===t.severity)?"improvement":t.rulesets.some(t=>"success"===t.severity)?"notification":"other"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-feedback-item"]],inputs:{feedback:"feedback"},decls:5,vars:2,consts:[[1,"feedback"],[1,"category-label"],[1,"feedback-list"],[3,"class",4,"ngFor","ngForOf"],[1,"message-text"],[1,"message-id","d-inline","float-right"],[4,"ngFor","ngForOf"],[3,"hidden"],["class","context",4,"ngFor","ngForOf"],["target","_blank","title","Open guidance in a new window",3,"hidden","href"],[1,"context"]],template:function(t,e){1&t&&(f.Qb(0,"div",0),f.Qb(1,"div",1),f.wc(2),f.Pb(),f.Qb(3,"ul",2),f.uc(4,V,8,8,"li",3),f.Pb(),f.Pb()),2&t&&(f.yb(2),f.xc(e.feedback.label),f.yb(2),f.ic("ngForOf",e.feedback.messages))},directives:[i.k],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.category-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.feedback[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding:0}.message[_ngcontent-%COMP%]{font-size:16px;font-weight:500;padding:12px;color:#000;margin-bottom:4px;background-color:#ecf0f1}.message-text[_ngcontent-%COMP%]{white-space:pre-line}.feedback-list[_ngcontent-%COMP%]{list-style-type:none}.critical[_ngcontent-%COMP%]{border-left:6px solid #a66ee9}.error[_ngcontent-%COMP%]{border-left:6px solid #f73357}.warning[_ngcontent-%COMP%]{border-left:6px solid #ff7264}.improvement[_ngcontent-%COMP%]{border-left:6px solid #06dbe4}.notification[_ngcontent-%COMP%]{border-left:6px solid #18bc9c}.context[_ngcontent-%COMP%]{font-size:15px;font-weight:400}']}),t})();function W(t,e){if(1&t&&(f.Qb(0,"span",16),f.wc(1),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.xc(t.getIssueCount("critical"))}}function X(t,e){if(1&t&&(f.Qb(0,"span",17),f.wc(1),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.xc(t.getIssueCount("danger"))}}function H(t,e){if(1&t&&(f.Qb(0,"span",18),f.wc(1),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.xc(t.getIssueCount("warning"))}}function Y(t,e){if(1&t&&(f.Qb(0,"span",19),f.wc(1),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.xc(t.getIssueCount("info"))}}function Z(t,e){if(1&t&&(f.Qb(0,"span",20),f.wc(1),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.xc(t.getIssueCount("success"))}}function tt(t,e){if(1&t&&(f.Qb(0,"div",10),f.uc(1,W,2,1,"span",11),f.uc(2,X,2,1,"span",12),f.uc(3,H,2,1,"span",13),f.uc(4,Y,2,1,"span",14),f.uc(5,Z,2,1,"span",15),f.Pb()),2&t){const t=f.cc();f.yb(1),f.ic("ngIf",t.getIssueCount("critical")>0),f.yb(1),f.ic("ngIf",t.getIssueCount("danger")>0),f.yb(1),f.ic("ngIf",t.getIssueCount("warning")>0),f.yb(1),f.ic("ngIf",t.getIssueCount("info")>0),f.yb(1),f.ic("ngIf",t.getIssueCount("success")>0)}}function et(t,e){1&t&&(f.Qb(0,"span"),f.Mb(1,"img",21),f.Pb())}function at(t,e){1&t&&(f.Qb(0,"span"),f.Mb(1,"img",22),f.Pb())}function it(t,e){1&t&&f.Mb(0,"app-feedback-item",25),2&t&&f.ic("feedback",e.$implicit)}function nt(t,e){if(1&t&&(f.Qb(0,"div",23),f.uc(1,it,1,1,"app-feedback-item",24),f.Pb()),2&t){const t=f.cc();f.ic("ngbCollapse",t.isCollapsed),f.yb(1),f.ic("ngForOf",t.feedbackData)}}function ct(t,e){if(1&t&&(f.Qb(0,"p"),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.yc("There is no ",t.item," file feedback to display")}}let st=(()=>{class t{constructor(){this.feedbackData=[],this.title="",this.item="activity",this.items="activities",this.isCollapsed=!1}ngOnInit(){}getIssueCount(t){let e=0;return this.feedbackData.forEach(a=>{a.messages.forEach(a=>{a.rulesets.some(e=>e.severity===t)&&(e+=a.context.length)})}),e}collapse(){this.isCollapsed=!this.isCollapsed}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-single-feedback"]],inputs:{feedbackData:"feedbackData",title:"title",item:"item",items:"items"},decls:13,vars:6,consts:[[1,"xml-feedback"],[1,"feedback-heading","row"],[1,"col","title-col",3,"click"],[1,"feedback-single-title","title","d-inline"],["class","d-inline float-right",4,"ngIf"],[1,"col-auto","collapse-col",3,"click"],["type","button",1,"btn","btn-outline-secondary","collapser"],[4,"ngIf"],["class","feedback-items",3,"ngbCollapse",4,"ngIf","ngIfElse"],["noFeedbackData",""],[1,"d-inline","float-right"],["class","badge badge-critical",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"badge","badge-critical"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-info"],[1,"badge","badge-success"],["src","assets/icons/arrow_down_24.svg","alt","icon arrow down"],["src","assets/icons/arrow_up_24.svg","alt","icon arrow up"],[1,"feedback-items",3,"ngbCollapse"],[3,"feedback",4,"ngFor","ngForOf"],[3,"feedback"]],template:function(t,e){if(1&t&&(f.Qb(0,"div",0),f.Qb(1,"div",1),f.Qb(2,"div",2),f.ac("click",function(){return e.collapse()}),f.Qb(3,"h5",3),f.wc(4),f.Pb(),f.uc(5,tt,6,5,"div",4),f.Pb(),f.Qb(6,"div",5),f.ac("click",function(){return e.collapse()}),f.Qb(7,"button",6),f.uc(8,et,2,0,"span",7),f.uc(9,at,2,0,"span",7),f.Pb(),f.Pb(),f.Pb(),f.uc(10,nt,2,2,"div",8),f.Pb(),f.uc(11,ct,2,1,"ng-template",null,9,f.vc)),2&t){const t=f.pc(12);f.yb(4),f.xc(e.title),f.yb(1),f.ic("ngIf",e.feedbackData.length>0),f.yb(3),f.ic("ngIf",!e.isCollapsed),f.yb(1),f.ic("ngIf",e.isCollapsed),f.yb(1),f.ic("ngIf",e.feedbackData.length>0)("ngIfElse",t)}},directives:[i.l,s.a,i.k,G],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.xml-feedback[_ngcontent-%COMP%]{margin:0 0 10px;border:1px solid #d3d3d3;border-radius:.15rem;padding:10px}.feedback-heading[_ngcontent-%COMP%]{font-weight:700;font-size:18px;margin-left:0;margin-right:0;width:100%}.title-col[_ngcontent-%COMP%]{padding-right:0;padding-left:0;cursor:pointer}.identifier-link[_ngcontent-%COMP%]{font-size:16px;margin-right:8px}.feedback-items[_ngcontent-%COMP%]{padding:14px}.btn.collapser[_ngcontent-%COMP%]{margin-left:12px;padding:0;line-height:1;text-shadow:none;opacity:.5;border-style:none}.btn.collapser[_ngcontent-%COMP%]:hover{background-color:inherit}.btn.collapser.focus[_ngcontent-%COMP%], .btn.collapser[_ngcontent-%COMP%]:focus{box-shadow:none}.badge-critical[_ngcontent-%COMP%]{background-color:#a66ee9;color:#fff}.feedback-single-title[_ngcontent-%COMP%]{font-size:1em}']}),t})();function ot(t,e){if(1&t&&(f.Qb(0,"span",18),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.xc(t.getIssueCount("critical"))}}function rt(t,e){if(1&t&&(f.Qb(0,"span",19),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.xc(t.getIssueCount("danger"))}}function dt(t,e){if(1&t&&(f.Qb(0,"span",20),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.xc(t.getIssueCount("warning"))}}function ft(t,e){if(1&t&&(f.Qb(0,"span",21),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.xc(t.getIssueCount("info"))}}function lt(t,e){if(1&t&&(f.Qb(0,"span",22),f.wc(1),f.Pb()),2&t){const t=f.cc();f.yb(1),f.xc(t.getIssueCount("success"))}}function bt(t,e){1&t&&(f.Qb(0,"span"),f.Mb(1,"img",23),f.Pb())}function gt(t,e){1&t&&(f.Qb(0,"span"),f.Mb(1,"img",24),f.Pb())}function ut(t,e){1&t&&f.Mb(0,"app-feedback-item",25),2&t&&f.ic("feedback",e.$implicit)}let pt=(()=>{class t{constructor(t){this.logger=t,this.isCollapsed=!1}ngOnInit(){}collapse(){this.isCollapsed=!this.isCollapsed}getLinkDportal(t,e){return this.dqfs&&"iati-organisations"===this.dqfs.filetype?`http://d-portal.org/ctrack.html?publisher=${encodeURIComponent(t)}`:`http://d-portal.org/ctrack.html?publisher=${encodeURIComponent(t)}#view=act&aid=${encodeURIComponent(e)}`}getIssueCount(t){let e=0;return this.activity.feedback.forEach(a=>{a.messages.forEach(a=>{if(a.rulesets.some(e=>e.severity===t)){const t=this.overrideGuidanceLink(a.id);null!=t&&a.rulesets.forEach(e=>{e.href=t}),e+=a.context.length}})}),e}cleanIdentifier(t){const e=t.indexOf("\n");return e>=0?t.substring(0,e):t}overrideGuidanceLink(t){const e={"102.1.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","103.1.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","106.1.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/","11.1.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.1.3":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.1.4":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.1.5":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.2.1":"https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/","11.2.2":"https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/","11.3.1":"https://iatistandard.org/en/guidance/standard-guidance/organisation-budgets-spend/","12.1.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","12.1.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","12.3.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","12.3.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","12.4.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","2.1.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","2.1.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","2.1.4":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","2.2.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","3.1.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.1.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.1.4":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.4.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.4.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.4.4":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.6.2":"https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/","3.7.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.7.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","6.1.5":"https://iatistandard.org/en/guidance/standard-guidance/related-documents/","6.10.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-participants/","6.11.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","6.13.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/","6.14.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/","6.2.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","6.2.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","6.6.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","6.7.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","7.5.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-budgets/","7.5.3":"https://iatistandard.org/en/guidance/standard-guidance/activity-budgets/","8.6.3":"https://iatistandard.org/en/guidance/standard-guidance/organisation-budgets-spend/"};return t in e?e[t]:null}}return t.\u0275fac=function(e){return new(e||t)(f.Lb(b.a))},t.\u0275cmp=f.Fb({type:t,selectors:[["app-feedback-group"]],inputs:{activity:"activity",item:"item",items:"items",dqfs:"dqfs"},decls:23,vars:16,consts:[[1,"feedback-group"],[1,"feedback-heading","row"],[1,"col","title-col",3,"click"],[1,"title-col__title-label"],[1,"feedback-group-title","title","d-inline"],[1,"d-inline","float-right"],[1,"identifier-link"],["target","_blank",3,"href","title","click"],["class","badge badge-critical",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"col-auto","collapse-col",3,"click"],["type","button",1,"btn","btn-outline-secondary","collapser"],[4,"ngIf"],[1,"feedback-items",3,"ngbCollapse"],[3,"feedback",4,"ngFor","ngForOf"],[1,"badge","badge-critical"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-info"],[1,"badge","badge-success"],["src","assets/icons/arrow_down_24.svg","alt","icon arrow down"],["src","assets/icons/arrow_up_24.svg","alt","icon arrow up"],[3,"feedback"]],template:function(t,e){1&t&&(f.Qb(0,"div",0),f.Qb(1,"div",1),f.Qb(2,"div",2),f.ac("click",function(){return e.collapse()}),f.Qb(3,"div",3),f.wc(4),f.dc(5,"titlecase"),f.Pb(),f.Qb(6,"h5",4),f.wc(7),f.Pb(),f.Qb(8,"div",5),f.Qb(9,"span",6),f.Qb(10,"a",7),f.ac("click",function(t){return t.stopPropagation()}),f.wc(11),f.Pb(),f.Pb(),f.uc(12,ot,2,1,"span",8),f.uc(13,rt,2,1,"span",9),f.uc(14,dt,2,1,"span",10),f.uc(15,ft,2,1,"span",11),f.uc(16,lt,2,1,"span",12),f.Pb(),f.Pb(),f.Qb(17,"div",13),f.ac("click",function(){return e.collapse()}),f.Qb(18,"button",14),f.uc(19,bt,2,0,"span",15),f.uc(20,gt,2,0,"span",15),f.Pb(),f.Pb(),f.Pb(),f.Qb(21,"div",16),f.uc(22,ut,1,1,"app-feedback-item",17),f.Pb(),f.Pb()),2&t&&(f.yb(4),f.yc("",f.ec(5,14,e.item)," title"),f.yb(3),f.xc(e.activity.title),f.yb(3),f.jc("href",e.getLinkDportal(e.activity.publisher,e.cleanIdentifier(e.activity.identifier)),f.rc),f.kc("title","Open this ",e.item," in d-portal"),f.yb(1),f.xc(e.cleanIdentifier(e.activity.identifier)),f.yb(1),f.ic("ngIf",e.getIssueCount("critical")>0),f.yb(1),f.ic("ngIf",e.getIssueCount("danger")>0),f.yb(1),f.ic("ngIf",e.getIssueCount("warning")>0),f.yb(1),f.ic("ngIf",e.getIssueCount("info")>0),f.yb(1),f.ic("ngIf",e.getIssueCount("success")>0),f.yb(3),f.ic("ngIf",!e.isCollapsed),f.yb(1),f.ic("ngIf",e.isCollapsed),f.yb(1),f.ic("ngbCollapse",e.isCollapsed),f.yb(1),f.ic("ngForOf",e.activity.feedback))},directives:[i.l,s.a,i.k,G],pipes:[i.u],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.feedback-group[_ngcontent-%COMP%]{margin:0 0 10px;border:1px solid #d3d3d3;border-radius:.15rem}.feedback-heading[_ngcontent-%COMP%]{font-weight:700;font-size:18px;padding:14px 0;margin-left:0;margin-right:0;width:100%}.title-col[_ngcontent-%COMP%]{padding-right:0;cursor:pointer}.title-col[_ngcontent-%COMP%]   .title-col__title-label[_ngcontent-%COMP%]{font-size:1.3rem}.identifier-link[_ngcontent-%COMP%]{font-size:16px;margin-right:8px}.feedback-items[_ngcontent-%COMP%]{padding:14px}.btn.collapser[_ngcontent-%COMP%]{margin-left:12px;padding:0;line-height:1;text-shadow:none;opacity:.5;border-style:none}.btn.collapser[_ngcontent-%COMP%]:hover{background-color:inherit}.btn.collapser.focus[_ngcontent-%COMP%], .btn.collapser[_ngcontent-%COMP%]:focus{box-shadow:none}.badge-critical[_ngcontent-%COMP%]{background-color:#a66ee9;color:#fff}.feedback-group-title[_ngcontent-%COMP%]{font-size:1em}']}),t})();function ht(t,e){if(1&t&&f.Mb(0,"app-feedback-group",7),2&t){const t=e.$implicit,a=f.cc(2);f.ic("activity",t)("item",a.item)("items",a.items)("dqfs",a.dqfs)}}function mt(t,e){if(1&t&&(f.Qb(0,"div"),f.uc(1,ht,1,4,"app-feedback-group",6),f.Pb()),2&t){const t=f.cc();f.yb(1),f.ic("ngForOf",t.activityData)}}function yt(t,e){1&t&&(f.Qb(0,"p"),f.wc(1,"There is no feedback to display"),f.Pb())}let vt=(()=>{class t{constructor(){this.activityData=[],this.title="",this.item="activity",this.items="activities",this.isCollapsed=!1}toggleCollapse(){var t;this.isCollapsed=!this.isCollapsed,null===(t=this.groups)||void 0===t||t.forEach(t=>t.isCollapsed=this.isCollapsed)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Fb({type:t,selectors:[["app-multi-feedback"]],viewQuery:function(t,e){if(1&t&&f.Bc(pt,1),2&t){let t;f.oc(t=f.bc())&&(e.groups=t)}},inputs:{activityData:"activityData",title:"title",item:"item",items:"items",dqfs:"dqfs"},decls:9,vars:4,consts:[[1,"feedback"],[1,"title","feedback-title"],[1,"toggle-collapse"],["type","button",1,"btn","btn-link",3,"click"],[4,"ngIf","ngIfElse"],["noActivityData",""],[3,"activity","item","items","dqfs",4,"ngFor","ngForOf"],[3,"activity","item","items","dqfs"]],template:function(t,e){if(1&t&&(f.Qb(0,"div",0),f.Qb(1,"h5",1),f.wc(2),f.Qb(3,"span",2),f.Qb(4,"button",3),f.ac("click",function(){return e.toggleCollapse()}),f.wc(5),f.Pb(),f.Pb(),f.Pb(),f.uc(6,mt,2,1,"div",4),f.Pb(),f.uc(7,yt,2,0,"ng-template",null,5,f.vc)),2&t){const t=f.pc(8);f.yb(2),f.yc(" ",e.title," "),f.yb(3),f.yc(" Collapse/expand all ",e.items," "),f.yb(1),f.ic("ngIf",e.activityData.length>0)("ngIfElse",t)}},directives:[i.l,i.k,pt],styles:[".toggle-collapse[_ngcontent-%COMP%]{float:right;margin-right:-10px}.feedback-title[_ngcontent-%COMP%]{font-size:1.5em}.feedback-title[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{font-size:1em;margin-top:-10px}.feedback[_ngcontent-%COMP%]{border:1px solid #d3d3d3;padding:10px}"]}),t})();const kt=function(t){return["/validate",t]};function wt(t,e){if(1&t&&(f.Qb(0,"div",9),f.Qb(1,"a",10),f.wc(2,"<< Return to your workspace"),f.Pb(),f.Pb()),2&t){const t=f.cc();f.yb(1),f.ic("routerLink",f.lc(1,kt,t.tmpWorkspaceId))}}function Ct(t,e){if(1&t&&f.Mb(0,"app-main-report-info",11),2&t){const t=f.cc();f.ic("id",t.dataset.id)}}function Ut(t,e){1&t&&(f.Qb(0,"div",12),f.Mb(1,"app-spinner",13),f.Qb(2,"span",14),f.wc(3,"Loading report..."),f.Pb(),f.Pb()),2&t&&(f.yb(1),f.ic("backColor","white"))}function Pt(t,e){if(1&t){const t=f.Rb();f.Qb(0,"div",15),f.Qb(1,"h2"),f.wc(2,"No data found."),f.Pb(),f.Qb(3,"p"),f.wc(4,"It looks like the url is not valid."),f.Pb(),f.Qb(5,"ul"),f.Qb(6,"li",16),f.ac("click",function(){return f.qc(t),f.cc().goBack()}),f.Qb(7,"button",17),f.wc(8,"Go back to the previous page."),f.Pb(),f.Pb(),f.Qb(9,"li"),f.Qb(10,"button",18),f.wc(11,"Go to the home page."),f.Pb(),f.Pb(),f.Pb(),f.Pb()}}function Mt(t,e){if(1&t&&(f.Qb(0,"div"),f.Mb(1,"app-single-feedback",25),f.Mb(2,"app-multi-feedback",26),f.Pb()),2&t){const t=f.cc(3);f.yb(1),f.ic("feedbackData",t.companyFeedback)("title","Activity file feedback")("item","activity")("items","activities"),f.yb(1),f.ic("activityData",t.activities)("title","Feedback per activity")("item","activity")("items","activities")("dqfs",t.data)}}function It(t,e){if(1&t&&(f.Qb(0,"div"),f.uc(1,Mt,3,9,"div",24),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.ic("ngIf","iati-activities"===t.filetype)}}function Ot(t,e){if(1&t&&(f.Qb(0,"div"),f.Mb(1,"app-single-feedback",25),f.Mb(2,"app-multi-feedback",26),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.ic("feedbackData",t.companyFeedback)("title","Organisation file feedback")("item","organisation")("items","organisations"),f.yb(1),f.ic("activityData",t.activities)("title","Organisation feedback")("item","organisation")("items","organisations")("dqfs",t.data)}}function xt(t,e){if(1&t&&(f.Qb(0,"div"),f.Mb(1,"app-single-feedback",27),f.Pb()),2&t){const t=f.cc(2);f.yb(1),f.ic("feedbackData",t.companyFeedbackData)("title","Not an IATI file")}}function Qt(t,e){if(1&t){const t=f.Rb();f.Qb(0,"div",19),f.Qb(1,"div",20),f.Qb(2,"h4"),f.wc(3,"Filters"),f.Pb(),f.Qb(4,"app-filter-severity",21),f.ac("selectedChanged",function(){return f.qc(t),f.cc().severitySelectedChanged()}),f.Pb(),f.Qb(5,"app-filter-category",22),f.ac("selectedChanged",function(){return f.qc(t),f.cc().categorySelectedChanged()}),f.Pb(),f.Pb(),f.Qb(6,"div",23),f.Qb(7,"h4"),f.wc(8,"Feedback"),f.Pb(),f.uc(9,It,2,1,"div",24),f.uc(10,Ot,3,9,"div",24),f.uc(11,xt,2,2,"div",24),f.Pb(),f.Pb()}if(2&t){const t=f.cc();f.yb(4),f.ic("severities",t.severities),f.yb(1),f.ic("categories",t.categories),f.yb(4),f.ic("ngIf",t.companyFeedback),f.yb(1),f.ic("ngIf","iati-organisations"===t.filetype),f.yb(1),f.ic("ngIf","not-iati"===t.filetype)}}let _t=(()=>{class t{constructor(t,e,a,i,n,c,s){this.dataQualityFeedbackService=t,this.validatedIatiService=e,this.organisationService=a,this.logger=i,this.activateRoute=n,this.loader=c,this.location=s,this.dataset=null,this.isLoading=!1,this.data={},this.fileName="",this.isTestfiles=!1,this.tmpWorkspaceId="",this.activityData=[],this.activities=[],this.companyFeedbackData=[],this.companyFeedback=[],this.severities=[],this.sources=[],this.categories=[],this.filetype="",this.filterSeverity=t=>t.rulesets.some(t=>this.severities.some(e=>!0===e.show&&e.slug===t.severity)),this.filterSource=t=>this.sources.some(e=>!0===e.show&&e.slug===t.src),this.filterCategory=t=>this.categories.some(e=>!0===e.show&&e.id===t.category),this.filterTypeMessage=t=>this.severities.some(e=>e.types.some(e=>!0===e.show&&e.id===t.id))}ngOnInit(){this.loaderSubscription=this.loader.loaderState.subscribe(t=>{this.isLoading=t.show}),this.severities=this.dataQualityFeedbackService.getSeverities(),this.sources=this.dataQualityFeedbackService.getSources(),this.paramsSubscription=this.activateRoute.params.subscribe(t=>{this.qParamsSubscription=this.activateRoute.queryParams.subscribe(e=>{this.isTestfiles=e.isTestfiles,e.isTestfiles?this.validatedIatiService.getIatiDatasetById(t.id).subscribe(t=>{const a=t.fileid.split(".").shift();this.fileName=t.filename,this.tmpWorkspaceId=t.tmpworkspaceId,this.loadData(a,e.isTestfiles)}):this.loadData(t.id,e.isTestfiles)})})}ngOnDestroy(){var t;null===(t=this.loaderSubscription)||void 0===t||t.unsubscribe(),this.paramsSubscription&&this.paramsSubscription.unsubscribe(),this.qParamsSubscription&&this.qParamsSubscription.unsubscribe()}loadData(t,e){this.loader.show(),e?this.dataQualityFeedbackService.getTestFilesDataQualityFeedbackById(t).subscribe(t=>{this.dataset=t,this.dataset&&(this.dataset.filename=this.fileName),this.setData(t)},t=>{this.logger.error("Error loadActivityData",t),this.loader.hide()}):this.organisationService.getIatiDatasetById(t).subscribe(t=>{t&&t.length?(this.dataset=t[0],this.dataQualityFeedbackService.getDataQualityFeedback(t[0].md5).subscribe(t=>{this.setData(t)},t=>{this.logger.error("Error loadActivityData",t),this.loader.hide()})):(this.activityData=void 0,this.companyFeedbackData=void 0,this.loader.hide())})}setData(t){this.data=t,this.fileName=this.dataset.filename,t.feedback&&(this.companyFeedbackData=t.feedback),this.filetype=t.filetype,"iati-activities"===t.filetype&&t.activities&&(this.activityData=t.activities),"iati-organisations"===t.filetype&&t.organisations&&(this.activityData=t.organisations),void 0!==this.activityData||void 0!==this.companyFeedbackData?(this.loadCategories(),this.loadTypeMessages(this.activityData,this.companyFeedbackData),this.filterActivities(),this.loader.hide()):this.loader.hide()}loadCategories(){const t=[];this.activityData.forEach(e=>{e.feedback.forEach(e=>{t.some(t=>t.id===e.category)||t.push({id:e.category,name:e.label})})}),this.companyFeedbackData.forEach(e=>{t.some(t=>t.id===e.category)||t.push({id:e.category,name:e.label})}),t.forEach(t=>{this.categories.push({id:t.id,name:t.name,count:null,order:0,show:!0})})}loadTypeMessages(t,e){const a=[];t.forEach(t=>{t.feedback.forEach(t=>{t.messages.forEach(t=>{if(!a.some(e=>e.id===t.id)){const e={sev:"",id:"",text:""};e.sev=this.getfeedbackSeverity(t),e.id=t.id,e.text=t.text,a.push(e)}})})}),e.forEach(t=>{t.messages.forEach(t=>{if(!a.some(e=>e.id===t.id)){const e={sev:"",id:"",text:""};e.sev=this.getfeedbackSeverity(t),e.id=t.id,e.text=t.text,a.push(e)}})}),a.forEach(t=>{const e=this.severities.find(e=>e.id===t.sev);void 0!==e&&e.types.push({id:t.id,text:t.text,show:!0})})}filterActivities(){this.loader.show();let t=JSON.parse(JSON.stringify(this.activityData));this.filterCompanyFeedback(),t.forEach(t=>{t.feedback=t.feedback.filter(this.filterCategory)}),t.forEach(t=>{t.feedback.forEach(t=>{t.messages.forEach(t=>{t.rulesets=t.rulesets.filter(this.filterSource)})})}),t.forEach(t=>{t.feedback.forEach(t=>{t.messages=t.messages.filter(this.filterTypeMessage)})}),t.forEach(t=>{t.feedback.forEach(t=>{t.messages=t.messages.filter(this.filterSeverity)})}),t.forEach(t=>{t.feedback=t.feedback.filter(t=>t.messages.length>0)}),t=t.filter(t=>t.feedback.length>0),this.activities=t,this.setSeverityCount(),this.setSourceCount(),this.setCategoryCount(),this.setTypeMessageCount(),this.loader.hide()}filterCompanyFeedback(){let t=JSON.parse(JSON.stringify(this.companyFeedbackData));t=t.filter(this.filterCategory),t.forEach(t=>{t.messages.forEach(t=>{t.rulesets=t.rulesets.filter(this.filterSource)})}),t.forEach(t=>{t.messages=t.messages.filter(this.filterTypeMessage)}),t.forEach(t=>{t.messages=t.messages.filter(this.filterSeverity)}),t=t.filter(t=>t.messages.length>0),this.companyFeedback=t}setSeverityCount(){this.severities.forEach(t=>{t.count=t.show?this.getIssueCount(t.slug):null})}getIssueCount(t){let e=0;return this.activities.forEach(a=>{a.feedback.forEach(a=>{a.messages.forEach(a=>{a.rulesets.some(e=>e.severity===t)&&(e+=a.context.length)})})}),this.companyFeedbackData.forEach(a=>{a.messages.forEach(a=>{a.rulesets.some(e=>e.severity===t)&&(e+=a.context.length)})}),e}setSourceCount(){this.sources.forEach(t=>{t.count=t.show?this.getSourceCount(t.slug):null})}getSourceCount(t){let e=0;return this.activities.forEach(a=>{a.feedback.forEach(a=>{a.messages.forEach(a=>{a.rulesets.some(e=>e.src===t)&&(e+=a.context.length)})})}),this.companyFeedbackData.forEach(a=>{a.messages.forEach(a=>{a.rulesets.some(e=>e.src===t)&&(e+=a.context.length)})}),e}setCategoryCount(){this.categories.forEach(t=>{t.count=t.show?this.getCategoryCount(t.id):null})}getCategoryCount(t){let e=0;return this.activities.forEach(a=>{a.feedback.forEach(a=>{a.category===t&&a.messages.forEach(t=>{e+=t.context.length})})}),this.companyFeedbackData.forEach(a=>{a.category===t&&a.messages.forEach(t=>{e+=t.context.length})}),e}setTypeMessageCount(){this.severities.forEach(t=>{t.types.forEach(t=>{t.count=t.show?this.getTypeMessageCount(t.id):null})}),this.severities.forEach(t=>{t.types.sort((t,e)=>e.count-t.count)})}getTypeMessageCount(t){let e=0;return this.activities.forEach(a=>{a.feedback.forEach(a=>{a.messages.forEach(a=>{a.id===t&&(e+=a.context.length)})})}),this.companyFeedbackData.forEach(a=>{a.messages.forEach(a=>{a.id===t&&(e+=a.context.length)})}),e}severitySelectedChanged(){this.filterActivities()}sourceSelectedChanged(){this.filterActivities()}categorySelectedChanged(){this.filterActivities()}typesSelectedChanged(){this.filterActivities()}getfeedbackSeverity(t){return t.rulesets.some(t=>"danger"===t.severity)?"error":t.rulesets.some(t=>"critical"===t.severity)?"critical":t.rulesets.some(t=>"warning"===t.severity)?"warning":t.rulesets.some(t=>"info"===t.severity)?"improvement":t.rulesets.some(t=>"success"===t.severity)?"notification":"other"}goBack(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(f.Lb(g),f.Lb(u.a),f.Lb(p.a),f.Lb(b.a),f.Lb(n.a),f.Lb(h.a),f.Lb(i.h))},t.\u0275cmp=f.Fb({type:t,selectors:[["app-main"]],decls:11,vars:6,consts:[[1,"container-fluid"],["class","content-block",4,"ngIf"],[1,"row","alert","alert-light"],[1,"col"],[3,"id",4,"ngIf"],[3,"data"],["class","alert alert-info","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","row",4,"ngIf"],[1,"content-block"],[3,"routerLink"],[3,"id"],["role","alert",1,"alert","alert-info"],[3,"backColor"],[1,"loading-text"],["role","alert",1,"alert","alert-warning"],[3,"click"],["type","button",1,"btn","btn-link"],["routerLink","\\","type","button",1,"btn","btn-link"],[1,"row"],[1,"col-md-4","filters"],[3,"severities","selectedChanged"],[3,"categories","selectedChanged"],[1,"col-md-8","results"],[4,"ngIf"],[3,"feedbackData","title","item","items"],[3,"activityData","title","item","items","dqfs"],[3,"feedbackData","title"]],template:function(t,e){1&t&&(f.Qb(0,"div",0),f.uc(1,wt,3,3,"div",1),f.Qb(2,"div",2),f.Qb(3,"div",3),f.Qb(4,"h1"),f.wc(5,"File validation report"),f.Pb(),f.uc(6,Ct,1,1,"app-main-report-info",4),f.Mb(7,"app-iati-info",5),f.Pb(),f.Pb(),f.uc(8,Ut,4,1,"div",6),f.uc(9,Pt,12,0,"div",7),f.uc(10,Qt,12,5,"div",8),f.Pb()),2&t&&(f.yb(1),f.ic("ngIf",e.tmpWorkspaceId),f.yb(5),f.ic("ngIf",e.dataset),f.yb(1),f.ic("data",e.data),f.yb(1),f.ic("ngIf",e.isLoading),f.yb(1),f.ic("ngIf",void 0===e.activityData&&void 0===e.companyFeedbackData&&!e.isLoading),f.yb(1),f.ic("ngIf",(void 0!==e.activityData||void 0!==e.companyFeedbackData)&&!e.isLoading))},directives:[i.l,w,n.f,U,P.a,n.e,B,j,st,vt],styles:[".loading-text[_ngcontent-%COMP%]{margin-left:12px}.btn-link[_ngcontent-%COMP%]{color:#fff}.content-block[_ngcontent-%COMP%]{margin-bottom:2em;font-size:1.5em}"]}),t})();var Ft=a("PCNd"),Et=a("oE6s");const Dt=[{path:"files/:id",component:_t},{path:"",redirectTo:"/404dqf",pathMatch:"full"}];let St=(()=>{class t{}return t.\u0275mod=f.Jb({type:t}),t.\u0275inj=f.Ib({factory:function(e){return new(e||t)},providers:[g],imports:[[i.b,n.g.forChild(Dt),c.g,s.b,Ft.a,Et.ValidateIatiModule,o.b],n.g]}),t})()}}]);