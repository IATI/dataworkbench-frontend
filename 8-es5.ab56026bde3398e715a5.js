!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{cGZY:function(e,i,a){"use strict";a.r(i),a.d(i,"DataQualityFeedbackModule",function(){return Xt});var c,o=a("ofXK"),s=a("tyNb"),r=a("3Pt+"),f=a("1kSV"),d=a("e/9f"),l=a("LRne"),u=a("JIr8"),b=a("fXoL"),g=a("tk/3"),p=a("SF6U"),h=((c=function(){function e(n,i){t(this,e),this.http=n,this.logger=i,this.urlApiIatiFile=window.__env.apiDataworkBench+"/iati-files",this.urlApiIatiTestFile=window.__env.apiDataworkBench+"/iati-testfiles",this.urlApiIatiDataSet=window.__env.apiDataworkBench+"/iati-datasets",this.urlApiOrganisation=window.__env.apiDataworkBench+"/iati-publishers"}return n(e,[{key:"getDataQualityFeedback",value:function(t){return this.http.get(this.urlApiIatiFile+"/file/json/"+t+".json").pipe(Object(u.a)(this.handleError("getIatiFile",void 0)))}},{key:"getTestFilesDataQualityFeedbackById",value:function(t){return this.http.get(this.urlApiIatiTestFile+"/file/json/"+t+".json").pipe(Object(u.a)(this.handleError("getIatiFile",void 0)))}},{key:"getReportInfo",value:function(t){var e=this,n={organisationName:"",fileName:"",organisationSlug:""};return this.http.get(this.urlApiIatiDataSet+"/findOne/?filter[where][id]="+t).subscribe(function(t){n.fileName=t.filename,n.organisationSlug=t.publisher,e.http.get(e.urlApiOrganisation+"/findOne/?filter[where][slug]="+t.publisher).subscribe(function(t){return n.organisationName=t.name,Object(l.a)(n)})}),Object(l.a)(n)}},{key:"getSeverities",value:function(){return[{id:"critical",slug:"critical",name:"Critical",description:"Files with critical errors will not be processed by the datastore",count:null,order:1,show:!0,types:[]},{id:"error",slug:"danger",name:"Errors",description:"Errors make it hard or impossible to use the data.",count:null,order:2,show:!0,types:[]},{id:"warning",slug:"warning",name:"Warnings",description:"Warnings indicate where the data can be more valuable.",count:null,order:3,show:!0,types:[]},{id:"improvement",slug:"info",name:"Improvements",description:"Improvements can make the data more useful.",count:null,order:4,show:!0,types:[]},{id:"notification",slug:"success",name:"Notifications",description:"Notifications are for your information.",count:null,order:5,show:!0,types:[]}]}},{key:"getSources",value:function(){return[{id:"iati",slug:"iati",name:"IATI Standard",count:null,order:1,show:!0},{id:"minbuza",slug:"minbuza",name:"Netherlands: Ministry of Foreign Affairs additional rules",count:null,order:2,show:!0},{id:"dfid",slug:"dfid",name:"UK: Department for International Development (DFID) additional rules",count:null,order:3,show:!0},{id:"practice",slug:"practice",name:"Common practice",count:null,order:4,show:!0},{id:"iati-doc",slug:"iati-doc",name:"IATI Standard (additional)",count:null,order:5,show:!0}]}},{key:"handleError",value:function(){var t=this,e=arguments.length>1?arguments[1]:void 0;return function(n){return t.logger.error(n),Object(l.a)(e)}}}]),e}()).\u0275fac=function(t){return new(t||c)(b.Xb(g.a),b.Xb(p.a))},c.\u0275prov=b.Hb({token:c,factory:c.\u0275fac}),c),y=a("XQMz"),m=a("Gl80"),v=a("b6Gx");function k(t,e){if(1&t&&b.Mb(0,"span",2),2&t){var n=b.cc();b.kc("title","IATI-Rules version: ",n.data.schemaVersion,"")}}function w(t,e){if(1&t&&(b.Qb(0,"span"),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.yc("IATI version: ",n.data.iatiVersion,"")}}function C(t,e){if(1&t&&(b.Qb(0,"span"),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.yc(" | Type: ",n.data.filetype,"")}}function U(t,e){if(1&t&&(b.Qb(0,"span"),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.yc(" | updated: ",n.data.feedbackUpdated,"")}}var P,M,I,O=((P=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||P)},P.\u0275cmp=b.Fb({type:P,selectors:[["app-iati-info"]],inputs:{data:"data"},decls:7,vars:5,consts:[[3,"title",4,"ngIf"],[4,"ngIf"],[3,"title"]],template:function(t,e){1&t&&(b.Qb(0,"h3"),b.wc(1),b.Pb(),b.Qb(2,"p"),b.uc(3,k,1,1,"span",0),b.uc(4,w,2,1,"span",1),b.uc(5,C,2,1,"span",1),b.uc(6,U,2,1,"span",1),b.Pb()),2&t&&(b.yb(1),b.xc(e.data.filename),b.yb(2),b.ic("ngIf",e.data.schemaVersion),b.yb(1),b.ic("ngIf",e.data.iatiVersion),b.yb(1),b.ic("ngIf",e.data.filetype),b.yb(1),b.ic("ngIf",e.data.feedbackUpdated))},directives:[o.l],styles:[""]}),P),x=function(t){return["/organisation",t]},Q=((M=function(){function e(n,i){t(this,e),this.dataQualityFeedbackService=n,this.logger=i,this.id="",this.reportInfo={organisationName:"",fileName:"",organisationSlug:""}}return n(e,[{key:"ngOnInit",value:function(){this.loadData(this.id)}},{key:"loadData",value:function(t){var e=this;this.dataQualityFeedbackService.getReportInfo(t).subscribe(function(t){e.reportInfo=t})}}]),e}()).\u0275fac=function(t){return new(t||M)(b.Lb(h),b.Lb(p.a))},M.\u0275cmp=b.Fb({type:M,selectors:[["app-main-report-info"]],inputs:{id:"id"},decls:4,vars:5,consts:[[3,"routerLink"]],template:function(t,e){1&t&&(b.Qb(0,"h3"),b.Qb(1,"a",0),b.wc(2),b.Pb(),b.wc(3),b.Pb()),2&t&&(b.yb(1),b.ic("routerLink",b.lc(3,x,e.reportInfo.organisationSlug)),b.yb(1),b.xc(e.reportInfo.organisationName),b.yb(1),b.yc(" - ",e.reportInfo.fileName," "))},directives:[s.f],styles:[""]}),M),_=a("f3yp"),F=["*"],E=((I=function(){function e(){t(this,e),this.checked=!1,this.checkedChange=new b.n,this.name=""}return n(e,[{key:"ngOnInit",value:function(){}},{key:"checkedChanged",value:function(){this.checkedChange.emit(this.checked)}}]),e}()).\u0275fac=function(t){return new(t||I)},I.\u0275cmp=b.Fb({type:I,selectors:[["app-checkbox"]],inputs:{checked:"checked",name:"name"},outputs:{checkedChange:"checkedChange"},ngContentSelectors:F,decls:4,vars:4,consts:[[1,"custom-control","custom-checkbox","d-inline"],["type","checkbox",1,"custom-control-input",3,"ngModel","ngModelChange","change"],[1,"custom-control-label"]],template:function(t,e){1&t&&(b.hc(),b.Qb(0,"div",0),b.Qb(1,"input",1),b.ac("ngModelChange",function(t){return e.checked=t})("change",function(){return e.checkedChanged()}),b.Pb(),b.Qb(2,"label",2),b.gc(3),b.Pb(),b.Pb()),2&t&&(b.yb(1),b.ic("ngModel",e.checked),b.zb("id",e.name)("name",e.name),b.yb(1),b.zb("for",e.name))},directives:[r.a,r.j,r.l],styles:[""]}),I),D=function(t){return{unselected:t}};function S(t,e){if(1&t){var n=b.Rb();b.Qb(0,"li",1),b.Qb(1,"span",2),b.wc(2),b.Pb(),b.Qb(3,"span",3),b.wc(4),b.Pb(),b.Qb(5,"span",4),b.Qb(6,"app-checkbox",5),b.ac("checkedChange",function(t){return b.qc(n),b.cc().typeMessage.show=t})("checkedChange",function(){return b.qc(n),b.cc().selectionChanged()}),b.Pb(),b.Pb(),b.Pb()}if(2&t){var i=b.cc();b.yb(2),b.yc("",i.typeMessage.count," x"),b.yb(1),b.ic("ngClass",b.lc(5,D,!(null!=i.typeMessage&&i.typeMessage.show))),b.yb(1),b.xc(i.typeMessage.text),b.yb(2),b.ic("checked",i.typeMessage.show)("name","filterTypeMsg"+i.typeMessage.text+i.typeMessage.id)}}var R,q=((R=function(){function e(){t(this,e),this.selectedChanged=new b.n}return n(e,[{key:"ngOnInit",value:function(){}},{key:"selectionChanged",value:function(){console.log("typeMessage: ",this.typeMessage),this.selectedChanged.emit("")}}]),e}()).\u0275fac=function(t){return new(t||R)},R.\u0275cmp=b.Fb({type:R,selectors:[["app-filter-type-message"]],inputs:{typeMessage:"typeMessage"},outputs:{selectedChanged:"selectedChanged"},decls:1,vars:1,consts:[["class","list-group-item",4,"ngIf"],[1,"list-group-item"],[1,"severity-count"],[3,"ngClass"],[1,"select"],[3,"checked","name","checkedChange"]],template:function(t,e){1&t&&b.uc(0,S,7,7,"li",0),2&t&&b.ic("ngIf",e.typeMessage)},directives:[o.l,o.j,E],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.filter[_ngcontent-%COMP%]{margin-bottom:20px}.list-group-item[_ngcontent-%COMP%]{background-color:inherit}.severity-count[_ngcontent-%COMP%]{display:inline-block;min-width:28px;margin-right:6px;text-align:right}.caption[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03)}.title[_ngcontent-%COMP%]{font-weight:700;display:inline}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}.select[_ngcontent-%COMP%]{margin-right:-10px;float:right}.unselected[_ngcontent-%COMP%]{text-decoration:line-through}'],changeDetection:0}),R);function T(t,e){if(1&t&&(b.Qb(0,"span",12),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.zc(" (",n.totalTypesSelected()," of ",n.totalTypes()," messages selected.) ")}}function A(t,e){1&t&&(b.Qb(0,"span"),b.Mb(1,"img",13),b.Pb())}function L(t,e){1&t&&(b.Qb(0,"span"),b.Mb(1,"img",14),b.Pb())}function B(t,e){if(1&t){var n=b.Rb();b.Qb(0,"span",17),b.Qb(1,"button",18),b.ac("click",function(){return b.qc(n),b.cc(2).unSelectAll()}),b.wc(2,"Unselect all"),b.Pb(),b.Pb()}}function N(t,e){if(1&t){var n=b.Rb();b.Qb(0,"span",17),b.Qb(1,"button",18),b.ac("click",function(){return b.qc(n),b.cc(2).selectAll()}),b.wc(2,"Select all"),b.Pb(),b.Pb()}}function K(t,e){if(1&t&&(b.Qb(0,"li",15),b.wc(1),b.uc(2,B,3,0,"span",16),b.uc(3,N,3,0,"span",16),b.Pb()),2&t){var n=b.cc();b.yb(1),b.yc(" ",n.severity.description," "),b.yb(1),b.ic("ngIf",n.allSelected()),b.yb(1),b.ic("ngIf",!n.allSelected())}}function z(t,e){if(1&t){var n=b.Rb();b.Qb(0,"app-filter-type-message",19),b.ac("selectedChanged",function(){return b.qc(n),b.cc().selectionChanged()}),b.Pb()}2&t&&b.ic("typeMessage",e.$implicit)}var j,$=function(t){return{hidden:t}},J=((j=function(){function e(){t(this,e),this.selectedChanged=new b.n,this.isCollapsed=!0}return n(e,[{key:"ngOnInit",value:function(){}},{key:"collapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"allSelected",value:function(){return this.severity.types.every(function(t){return!0===t.show})}},{key:"selectionChanged",value:function(){this.selectedChanged.emit("")}},{key:"selectAll",value:function(){this.severity.types.forEach(function(t){return t.show=!0}),this.selectionChanged()}},{key:"unSelectAll",value:function(){this.severity.types.forEach(function(t){return t.show=!1}),this.selectionChanged()}},{key:"totalTypes",value:function(){return this.severity.types.length}},{key:"totalTypesSelected",value:function(){var t=0;return this.severity.types.forEach(function(e){!0===e.show&&t++}),t}}]),e}()).\u0275fac=function(t){return new(t||j)},j.\u0275cmp=b.Fb({type:j,selectors:[["app-filter-severity-item"]],inputs:{severity:"severity"},outputs:{selectedChanged:"selectedChanged"},decls:14,vars:14,consts:[[1,"list-group-item",3,"className","ngClass"],[1,"severity-heading","row"],[1,"col","title-col",3,"click"],["ngClass","{'unselected':!severity.show}"],["class","badge badge-light text-danger float-right messages-selected-count",4,"ngIf"],[1,"col-auto","collapse-col"],[3,"checked","name","checkedChange"],["type","button",1,"btn","btn-outline-light","collapser",3,"click"],[4,"ngIf"],[1,"type-messages",3,"ngbCollapse"],["class","list-group-item filter-row",4,"ngIf"],[3,"typeMessage","selectedChanged",4,"ngFor","ngForOf"],[1,"badge","badge-light","text-danger","float-right","messages-selected-count"],["src","assets/icons/arrow_down_24_white.svg","alt","icon arrow down"],["src","assets/icons/arrow_up_24_white.svg","alt","icon arrow up"],[1,"list-group-item","filter-row"],["class","show-label",4,"ngIf"],[1,"show-label"],["type","button",1,"btn","btn-link",3,"click"],[3,"typeMessage","selectedChanged"]],template:function(t,e){1&t&&(b.Qb(0,"li",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.ac("click",function(){return e.collapse()}),b.Qb(3,"span",3),b.wc(4),b.Pb(),b.uc(5,T,2,2,"span",4),b.Pb(),b.Qb(6,"div",5),b.Qb(7,"app-checkbox",6),b.ac("checkedChange",function(t){return e.severity.show=t})("checkedChange",function(){return e.selectionChanged()}),b.Pb(),b.Qb(8,"button",7),b.ac("click",function(){return e.collapse()}),b.uc(9,A,2,0,"span",8),b.uc(10,L,2,0,"span",8),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(11,"div",9),b.uc(12,K,4,3,"li",10),b.uc(13,z,1,1,"app-filter-type-message",11),b.Pb()),2&t&&(b.ic("className","list-group-item "+e.severity.id)("ngClass",b.lc(12,$,0===e.severity.types.length)),b.yb(4),b.zc(" ",e.severity.name,": ",e.severity.types.length," types"),b.yb(1),b.ic("ngIf",!e.allSelected()),b.yb(2),b.ic("checked",e.severity.show)("name","filterSrc"+e.severity.name),b.yb(2),b.ic("ngIf",!e.isCollapsed),b.yb(1),b.ic("ngIf",e.isCollapsed),b.yb(1),b.ic("ngbCollapse",e.isCollapsed),b.yb(1),b.ic("ngIf",0!==e.severity.types.length),b.yb(1),b.ic("ngForOf",e.severity.types))},directives:[o.j,o.l,E,f.a,o.k,q],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.critical[_ngcontent-%COMP%]{background-color:#a66ee9;color:#fff}.error[_ngcontent-%COMP%]{background-color:#f73357;color:#fff}.warning[_ngcontent-%COMP%]{background-color:#ff7264;color:#fff}.improvement[_ngcontent-%COMP%]{background-color:#06dbe4;color:#fff}.notification[_ngcontent-%COMP%]{background-color:#18bc9c;color:#fff}.severity-count[_ngcontent-%COMP%]{display:inline-block;min-width:28px;margin-right:6px;text-align:right}.select[_ngcontent-%COMP%]{margin-right:-10px;float:right}.unselected[_ngcontent-%COMP%]{text-decoration:line-through}.hidden[_ngcontent-%COMP%]{display:none}.title-col[_ngcontent-%COMP%]{cursor:pointer}.btn.collapser[_ngcontent-%COMP%]{margin-left:12px;padding:0;line-height:1;text-shadow:none;opacity:.7;border-style:none}.btn.collapser[_ngcontent-%COMP%]:hover{background-color:inherit}.btn.collapser.focus[_ngcontent-%COMP%], .btn.collapser[_ngcontent-%COMP%]:focus{box-shadow:none}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}.filter-row[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03);color:#95a5a6}.messages-selected-count[_ngcontent-%COMP%]{margin-left:12px;padding:6px}']}),j);function V(t,e){if(1&t){var n=b.Rb();b.Qb(0,"app-filter-severity-item",6),b.ac("selectedChanged",function(){return b.qc(n),b.cc().selectionChanged()}),b.Pb()}2&t&&b.ic("severity",e.$implicit)}var G,W=((G=function(){function e(){t(this,e),this.severities=[],this.selectedChanged=new b.n}return n(e,[{key:"ngOnInit",value:function(){}},{key:"allSelected",value:function(){return this.severities.every(function(t){return!0===t.show})}},{key:"selectionChanged",value:function(){this.selectedChanged.emit("")}},{key:"selectAll",value:function(){this.severities.forEach(function(t){return t.show=!0}),this.selectionChanged()}}]),e}()).\u0275fac=function(t){return new(t||G)},G.\u0275cmp=b.Fb({type:G,selectors:[["app-filter-severity"]],inputs:{severities:"severities"},outputs:{selectedChanged:"selectedChanged"},decls:8,vars:1,consts:[[1,"filter"],[1,"list-group"],[1,"list-group-item","caption"],[1,"title"],[1,"show-label","text-muted"],[3,"severity","selectedChanged",4,"ngFor","ngForOf"],[3,"severity","selectedChanged"]],template:function(t,e){1&t&&(b.Qb(0,"div",0),b.Qb(1,"ul",1),b.Qb(2,"li",2),b.Qb(3,"div",3),b.wc(4,"View by message type"),b.Pb(),b.Qb(5,"span",4),b.wc(6,"Click to show or hide individual message types."),b.Pb(),b.Pb(),b.uc(7,V,1,1,"app-filter-severity-item",5),b.Pb(),b.Pb()),2&t&&(b.yb(7),b.ic("ngForOf",e.severities))},directives:[o.k,J],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.filter[_ngcontent-%COMP%]{margin-bottom:20px;background-color:rgba(0,0,0,.03)}.list-group-item[_ngcontent-%COMP%]{background-color:inherit}.caption[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03)}.title[_ngcontent-%COMP%]{font-weight:700;display:inline}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}']}),G);function X(t,e){if(1&t){var n=b.Rb();b.Qb(0,"span",6),b.Qb(1,"button",7),b.ac("click",function(){return b.qc(n),b.cc().selectAll()}),b.wc(2,"Select all"),b.Pb(),b.Pb()}}var H=function(t){return{unselected:t}};function Y(t,e){if(1&t){var n=b.Rb();b.Qb(0,"li",8),b.Qb(1,"span",9),b.wc(2),b.Pb(),b.Qb(3,"span",10),b.wc(4),b.Pb(),b.Qb(5,"span",11),b.Qb(6,"app-checkbox",12),b.ac("checkedChange",function(t){return e.$implicit.show=t})("checkedChange",function(){return b.qc(n),b.cc().selectionChanged()}),b.Pb(),b.Pb(),b.Pb()}if(2&t){var i=e.$implicit;b.yb(2),b.yc("",i.count," x"),b.yb(1),b.ic("ngClass",b.lc(5,H,!i.show)),b.yb(1),b.xc(i.name),b.yb(2),b.ic("checked",i.show)("name","filterCat"+i.name)}}var Z,tt=((Z=function(){function e(){t(this,e),this.categories=[],this.selectedChanged=new b.n}return n(e,[{key:"ngOnInit",value:function(){}},{key:"allSelected",value:function(){return this.categories.every(function(t){return!0===t.show})}},{key:"selectionChanged",value:function(){this.selectedChanged.emit("")}},{key:"selectAll",value:function(){this.categories.forEach(function(t){return t.show=!0}),this.selectionChanged()}}]),e}()).\u0275fac=function(t){return new(t||Z)},Z.\u0275cmp=b.Fb({type:Z,selectors:[["app-filter-category"]],inputs:{categories:"categories"},outputs:{selectedChanged:"selectedChanged"},decls:7,vars:2,consts:[[1,"filter"],[1,"list-group"],[1,"list-group-item","caption"],[1,"title"],["class","show-label",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"show-label"],["type","button",1,"btn","btn-link",3,"click"],[1,"list-group-item"],[1,"severity-count"],[3,"ngClass"],[1,"select"],[3,"checked","name","checkedChange"]],template:function(t,e){1&t&&(b.Qb(0,"div",0),b.Qb(1,"ul",1),b.Qb(2,"li",2),b.Qb(3,"div",3),b.wc(4,"View by category"),b.Pb(),b.uc(5,X,3,0,"span",4),b.Pb(),b.uc(6,Y,7,7,"li",5),b.Pb(),b.Pb()),2&t&&(b.yb(5),b.ic("ngIf",!e.allSelected()),b.yb(1),b.ic("ngForOf",e.categories))},directives:[o.l,o.k,o.j,E],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.filter[_ngcontent-%COMP%]{margin-bottom:20px;background-color:rgba(0,0,0,.03)}.list-group-item[_ngcontent-%COMP%]{background-color:inherit}.severity-count[_ngcontent-%COMP%]{display:inline-block;min-width:28px;margin-right:6px;text-align:right}.caption[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;background-color:rgba(0,0,0,.03)}.title[_ngcontent-%COMP%]{font-weight:700;display:inline}.show-label[_ngcontent-%COMP%]{float:right;margin-right:-10px}.show-label[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;border:0}.select[_ngcontent-%COMP%]{margin-right:-10px;float:right}.unselected[_ngcontent-%COMP%]{text-decoration:line-through}']}),Z);function et(t,e){if(1&t&&(b.Qb(0,"span"),b.Qb(1,"a",9),b.wc(2,"(see guidance)"),b.Pb(),b.Pb()),2&t){var n=e.$implicit;b.yb(1),b.jc("href",n.src,b.rc),b.ic("hidden",null==n.src)}}function nt(t,e){if(1&t&&(b.Qb(0,"li",10),b.wc(1),b.Pb()),2&t){var n=e.$implicit;b.yb(1),b.xc(n.text)}}function it(t,e){if(1&t&&(b.Qb(0,"li"),b.Qb(1,"span",4),b.wc(2),b.Pb(),b.Qb(3,"span",5),b.wc(4),b.uc(5,et,3,2,"span",6),b.Pb(),b.Qb(6,"ul",7),b.uc(7,nt,2,1,"li",8),b.Pb(),b.Pb()),2&t){var n=e.$implicit,i=b.cc();b.Bb("message ",i.getfeedbackColor(n),""),b.yb(2),b.xc(n.text),b.yb(2),b.yc(" ",n.id," "),b.yb(1),b.ic("ngForOf",n.rulesets),b.yb(1),b.ic("hidden",1===n.context.length&&""===n.context[0].text),b.yb(1),b.ic("ngForOf",n.context)}}var at,ct=((at=function(){function e(){var n=this;t(this,e),this.sortData=function(){n.feedback.messages.sort(n.compareSeverity)},this.compareSeverity=function(t,e){return n.getSeverity(t)-n.getSeverity(e)},this.getSeverity=function(t){return t.rulesets.some(function(t){return"critical"===t.severity})?1:t.rulesets.some(function(t){return"danger"===t.severity})||t.rulesets.some(function(t){return"warning"===t.severity})?2:t.rulesets.some(function(t){return"info"===t.severity})?3:t.rulesets.some(function(t){return"success"===t.severity})?4:9}}return n(e,[{key:"ngOnInit",value:function(){this.sortData()}},{key:"getfeedbackColor",value:function(t){return t.rulesets.some(function(t){return"danger"===t.severity})?"error":t.rulesets.some(function(t){return"critical"===t.severity})?"critical":t.rulesets.some(function(t){return"warning"===t.severity})?"warning":t.rulesets.some(function(t){return"info"===t.severity})?"improvement":t.rulesets.some(function(t){return"success"===t.severity})?"notification":"other"}}]),e}()).\u0275fac=function(t){return new(t||at)},at.\u0275cmp=b.Fb({type:at,selectors:[["app-feedback-item"]],inputs:{feedback:"feedback"},decls:5,vars:2,consts:[[1,"feedback"],[1,"category-label"],[1,"feedback-list"],[3,"class",4,"ngFor","ngForOf"],[1,"message-text"],[1,"message-id","d-inline","float-right"],[4,"ngFor","ngForOf"],[3,"hidden"],["class","context",4,"ngFor","ngForOf"],["target","_blank","title","Open guidance in a new window",3,"hidden","href"],[1,"context"]],template:function(t,e){1&t&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.wc(2),b.Pb(),b.Qb(3,"ul",2),b.uc(4,it,8,8,"li",3),b.Pb(),b.Pb()),2&t&&(b.yb(2),b.xc(e.feedback.label),b.yb(2),b.ic("ngForOf",e.feedback.messages))},directives:[o.k],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.category-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.feedback[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding:0}.message[_ngcontent-%COMP%]{font-size:16px;font-weight:500;padding:12px;color:#000;margin-bottom:4px;background-color:#ecf0f1}.message-text[_ngcontent-%COMP%]{white-space:pre-line}.feedback-list[_ngcontent-%COMP%]{list-style-type:none}.critical[_ngcontent-%COMP%]{border-left:6px solid #a66ee9}.error[_ngcontent-%COMP%]{border-left:6px solid #f73357}.warning[_ngcontent-%COMP%]{border-left:6px solid #ff7264}.improvement[_ngcontent-%COMP%]{border-left:6px solid #06dbe4}.notification[_ngcontent-%COMP%]{border-left:6px solid #18bc9c}.context[_ngcontent-%COMP%]{font-size:15px;font-weight:400}']}),at);function ot(t,e){if(1&t&&(b.Qb(0,"span",16),b.wc(1),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.xc(n.getIssueCount("critical"))}}function st(t,e){if(1&t&&(b.Qb(0,"span",17),b.wc(1),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.xc(n.getIssueCount("danger"))}}function rt(t,e){if(1&t&&(b.Qb(0,"span",18),b.wc(1),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.xc(n.getIssueCount("warning"))}}function ft(t,e){if(1&t&&(b.Qb(0,"span",19),b.wc(1),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.xc(n.getIssueCount("info"))}}function dt(t,e){if(1&t&&(b.Qb(0,"span",20),b.wc(1),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.xc(n.getIssueCount("success"))}}function lt(t,e){if(1&t&&(b.Qb(0,"div",10),b.uc(1,ot,2,1,"span",11),b.uc(2,st,2,1,"span",12),b.uc(3,rt,2,1,"span",13),b.uc(4,ft,2,1,"span",14),b.uc(5,dt,2,1,"span",15),b.Pb()),2&t){var n=b.cc();b.yb(1),b.ic("ngIf",n.getIssueCount("critical")>0),b.yb(1),b.ic("ngIf",n.getIssueCount("danger")>0),b.yb(1),b.ic("ngIf",n.getIssueCount("warning")>0),b.yb(1),b.ic("ngIf",n.getIssueCount("info")>0),b.yb(1),b.ic("ngIf",n.getIssueCount("success")>0)}}function ut(t,e){1&t&&(b.Qb(0,"span"),b.Mb(1,"img",21),b.Pb())}function bt(t,e){1&t&&(b.Qb(0,"span"),b.Mb(1,"img",22),b.Pb())}function gt(t,e){1&t&&b.Mb(0,"app-feedback-item",25),2&t&&b.ic("feedback",e.$implicit)}function pt(t,e){if(1&t&&(b.Qb(0,"div",23),b.uc(1,gt,1,1,"app-feedback-item",24),b.Pb()),2&t){var n=b.cc();b.ic("ngbCollapse",n.isCollapsed),b.yb(1),b.ic("ngForOf",n.feedbackData)}}function ht(t,e){if(1&t&&(b.Qb(0,"p"),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.yc("There is no ",n.item," file feedback to display")}}var yt,mt=((yt=function(){function e(){t(this,e),this.feedbackData=[],this.title="",this.item="activity",this.items="activities",this.isCollapsed=!1}return n(e,[{key:"ngOnInit",value:function(){}},{key:"getIssueCount",value:function(t){var e=0;return this.feedbackData.forEach(function(n){n.messages.forEach(function(n){n.rulesets.some(function(e){return e.severity===t})&&(e+=n.context.length)})}),e}},{key:"collapse",value:function(){this.isCollapsed=!this.isCollapsed}}]),e}()).\u0275fac=function(t){return new(t||yt)},yt.\u0275cmp=b.Fb({type:yt,selectors:[["app-single-feedback"]],inputs:{feedbackData:"feedbackData",title:"title",item:"item",items:"items"},decls:13,vars:6,consts:[[1,"xml-feedback"],[1,"feedback-heading","row"],[1,"col","title-col",3,"click"],[1,"feedback-single-title","title","d-inline"],["class","d-inline float-right",4,"ngIf"],[1,"col-auto","collapse-col",3,"click"],["type","button",1,"btn","btn-outline-secondary","collapser"],[4,"ngIf"],["class","feedback-items",3,"ngbCollapse",4,"ngIf","ngIfElse"],["noFeedbackData",""],[1,"d-inline","float-right"],["class","badge badge-critical",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"badge","badge-critical"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-info"],[1,"badge","badge-success"],["src","assets/icons/arrow_down_24.svg","alt","icon arrow down"],["src","assets/icons/arrow_up_24.svg","alt","icon arrow up"],[1,"feedback-items",3,"ngbCollapse"],[3,"feedback",4,"ngFor","ngForOf"],[3,"feedback"]],template:function(t,e){if(1&t&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.ac("click",function(){return e.collapse()}),b.Qb(3,"h5",3),b.wc(4),b.Pb(),b.uc(5,lt,6,5,"div",4),b.Pb(),b.Qb(6,"div",5),b.ac("click",function(){return e.collapse()}),b.Qb(7,"button",6),b.uc(8,ut,2,0,"span",7),b.uc(9,bt,2,0,"span",7),b.Pb(),b.Pb(),b.Pb(),b.uc(10,pt,2,2,"div",8),b.Pb(),b.uc(11,ht,2,1,"ng-template",null,9,b.vc)),2&t){var n=b.pc(12);b.yb(4),b.xc(e.title),b.yb(1),b.ic("ngIf",e.feedbackData.length>0),b.yb(3),b.ic("ngIf",!e.isCollapsed),b.yb(1),b.ic("ngIf",e.isCollapsed),b.yb(1),b.ic("ngIf",e.feedbackData.length>0)("ngIfElse",n)}},directives:[o.l,f.a,o.k,ct],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.xml-feedback[_ngcontent-%COMP%]{margin:0 0 10px;border:1px solid #d3d3d3;border-radius:.15rem;padding:10px}.feedback-heading[_ngcontent-%COMP%]{font-weight:700;font-size:18px;margin-left:0;margin-right:0;width:100%}.title-col[_ngcontent-%COMP%]{padding-right:0;padding-left:0;cursor:pointer}.identifier-link[_ngcontent-%COMP%]{font-size:16px;margin-right:8px}.feedback-items[_ngcontent-%COMP%]{padding:14px}.btn.collapser[_ngcontent-%COMP%]{margin-left:12px;padding:0;line-height:1;text-shadow:none;opacity:.5;border-style:none}.btn.collapser[_ngcontent-%COMP%]:hover{background-color:inherit}.btn.collapser.focus[_ngcontent-%COMP%], .btn.collapser[_ngcontent-%COMP%]:focus{box-shadow:none}.badge-critical[_ngcontent-%COMP%]{background-color:#a66ee9;color:#fff}.feedback-single-title[_ngcontent-%COMP%]{font-size:1em}']}),yt);function vt(t,e){if(1&t&&(b.Qb(0,"span",18),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.xc(n.getIssueCount("critical"))}}function kt(t,e){if(1&t&&(b.Qb(0,"span",19),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.xc(n.getIssueCount("danger"))}}function wt(t,e){if(1&t&&(b.Qb(0,"span",20),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.xc(n.getIssueCount("warning"))}}function Ct(t,e){if(1&t&&(b.Qb(0,"span",21),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.xc(n.getIssueCount("info"))}}function Ut(t,e){if(1&t&&(b.Qb(0,"span",22),b.wc(1),b.Pb()),2&t){var n=b.cc();b.yb(1),b.xc(n.getIssueCount("success"))}}function Pt(t,e){1&t&&(b.Qb(0,"span"),b.Mb(1,"img",23),b.Pb())}function Mt(t,e){1&t&&(b.Qb(0,"span"),b.Mb(1,"img",24),b.Pb())}function It(t,e){1&t&&b.Mb(0,"app-feedback-item",25),2&t&&b.ic("feedback",e.$implicit)}var Ot,xt=((Ot=function(){function e(n){t(this,e),this.logger=n,this.isCollapsed=!1}return n(e,[{key:"ngOnInit",value:function(){}},{key:"collapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"getLinkDportal",value:function(t,e){return this.dqfs&&"iati-organisations"===this.dqfs.filetype?"http://d-portal.org/ctrack.html?publisher=".concat(encodeURIComponent(t)):"http://d-portal.org/ctrack.html?publisher=".concat(encodeURIComponent(t),"#view=act&aid=").concat(encodeURIComponent(e))}},{key:"getIssueCount",value:function(t){var e=this,n=0;return this.activity.feedback.forEach(function(i){i.messages.forEach(function(i){if(i.rulesets.some(function(e){return e.severity===t})){var a=e.overrideGuidanceLink(i.id);null!=a&&i.rulesets.forEach(function(t){t.href=a}),n+=i.context.length}})}),n}},{key:"cleanIdentifier",value:function(t){var e=t.indexOf("\n");return e>=0?t.substring(0,e):t}},{key:"overrideGuidanceLink",value:function(t){var e={"102.1.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","103.1.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","106.1.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/","11.1.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.1.3":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.1.4":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.1.5":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","11.2.1":"https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/","11.2.2":"https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/","11.3.1":"https://iatistandard.org/en/guidance/standard-guidance/organisation-budgets-spend/","12.1.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","12.1.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","12.3.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","12.3.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","12.4.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","2.1.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","2.1.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","2.1.4":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","2.2.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","3.1.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.1.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.1.4":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.4.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.4.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.4.4":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.6.2":"https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/","3.7.1":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","3.7.2":"https://iatistandard.org/en/guidance/standard-guidance/countries-regions/","6.1.5":"https://iatistandard.org/en/guidance/standard-guidance/related-documents/","6.10.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-participants/","6.11.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","6.13.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/","6.14.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/","6.2.1":"https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/","6.2.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","6.6.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","6.7.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/","7.5.2":"https://iatistandard.org/en/guidance/standard-guidance/activity-budgets/","7.5.3":"https://iatistandard.org/en/guidance/standard-guidance/activity-budgets/","8.6.3":"https://iatistandard.org/en/guidance/standard-guidance/organisation-budgets-spend/"};return t in e?e[t]:null}}]),e}()).\u0275fac=function(t){return new(t||Ot)(b.Lb(p.a))},Ot.\u0275cmp=b.Fb({type:Ot,selectors:[["app-feedback-group"]],inputs:{activity:"activity",item:"item",items:"items",dqfs:"dqfs"},decls:23,vars:16,consts:[[1,"feedback-group"],[1,"feedback-heading","row"],[1,"col","title-col",3,"click"],[1,"title-col__title-label"],[1,"feedback-group-title","title","d-inline"],[1,"d-inline","float-right"],[1,"identifier-link"],["target","_blank",3,"href","title","click"],["class","badge badge-critical",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-info",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"col-auto","collapse-col",3,"click"],["type","button",1,"btn","btn-outline-secondary","collapser"],[4,"ngIf"],[1,"feedback-items",3,"ngbCollapse"],[3,"feedback",4,"ngFor","ngForOf"],[1,"badge","badge-critical"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-info"],[1,"badge","badge-success"],["src","assets/icons/arrow_down_24.svg","alt","icon arrow down"],["src","assets/icons/arrow_up_24.svg","alt","icon arrow up"],[3,"feedback"]],template:function(t,e){1&t&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.ac("click",function(){return e.collapse()}),b.Qb(3,"div",3),b.wc(4),b.dc(5,"titlecase"),b.Pb(),b.Qb(6,"h5",4),b.wc(7),b.Pb(),b.Qb(8,"div",5),b.Qb(9,"span",6),b.Qb(10,"a",7),b.ac("click",function(t){return t.stopPropagation()}),b.wc(11),b.Pb(),b.Pb(),b.uc(12,vt,2,1,"span",8),b.uc(13,kt,2,1,"span",9),b.uc(14,wt,2,1,"span",10),b.uc(15,Ct,2,1,"span",11),b.uc(16,Ut,2,1,"span",12),b.Pb(),b.Pb(),b.Qb(17,"div",13),b.ac("click",function(){return e.collapse()}),b.Qb(18,"button",14),b.uc(19,Pt,2,0,"span",15),b.uc(20,Mt,2,0,"span",15),b.Pb(),b.Pb(),b.Pb(),b.Qb(21,"div",16),b.uc(22,It,1,1,"app-feedback-item",17),b.Pb(),b.Pb()),2&t&&(b.yb(4),b.yc("",b.ec(5,14,e.item)," title"),b.yb(3),b.xc(e.activity.title),b.yb(3),b.jc("href",e.getLinkDportal(e.activity.publisher,e.cleanIdentifier(e.activity.identifier)),b.rc),b.kc("title","Open this ",e.item," in d-portal"),b.yb(1),b.xc(e.cleanIdentifier(e.activity.identifier)),b.yb(1),b.ic("ngIf",e.getIssueCount("critical")>0),b.yb(1),b.ic("ngIf",e.getIssueCount("danger")>0),b.yb(1),b.ic("ngIf",e.getIssueCount("warning")>0),b.yb(1),b.ic("ngIf",e.getIssueCount("info")>0),b.yb(1),b.ic("ngIf",e.getIssueCount("success")>0),b.yb(3),b.ic("ngIf",!e.isCollapsed),b.yb(1),b.ic("ngIf",e.isCollapsed),b.yb(1),b.ic("ngbCollapse",e.isCollapsed),b.yb(1),b.ic("ngForOf",e.activity.feedback))},directives:[o.l,f.a,o.k,ct],pipes:[o.u],styles:['@font-face{font-family:chalet-london-sixty;src:url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/b20ed4/0000000000000000000154d5/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:400;font-display:auto}@font-face{font-family:pragmatica;src:url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/983872/0000000000000000000100cc/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-style:normal;font-weight:700;font-display:auto}@font-face{font-family:Roboto;src:local("Roboto Regular"),local("Roboto-Regular"),url(//fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-style:normal;font-weight:400;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Roboto;src:local("Roboto Medium"),local("Roboto-Medium"),url(//fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-style:normal;font-weight:500;unicode-range:U+0-ff,U+131,U+152-153,U+2bb-2bc,U+2c6,U+2da,U+2dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.feedback-group[_ngcontent-%COMP%]{margin:0 0 10px;border:1px solid #d3d3d3;border-radius:.15rem}.feedback-heading[_ngcontent-%COMP%]{font-weight:700;font-size:18px;padding:14px 0;margin-left:0;margin-right:0;width:100%}.title-col[_ngcontent-%COMP%]{padding-right:0;cursor:pointer}.title-col[_ngcontent-%COMP%]   .title-col__title-label[_ngcontent-%COMP%]{font-size:1.3rem}.identifier-link[_ngcontent-%COMP%]{font-size:16px;margin-right:8px}.feedback-items[_ngcontent-%COMP%]{padding:14px}.btn.collapser[_ngcontent-%COMP%]{margin-left:12px;padding:0;line-height:1;text-shadow:none;opacity:.5;border-style:none}.btn.collapser[_ngcontent-%COMP%]:hover{background-color:inherit}.btn.collapser.focus[_ngcontent-%COMP%], .btn.collapser[_ngcontent-%COMP%]:focus{box-shadow:none}.badge-critical[_ngcontent-%COMP%]{background-color:#a66ee9;color:#fff}.feedback-group-title[_ngcontent-%COMP%]{font-size:1em}']}),Ot);function Qt(t,e){if(1&t&&b.Mb(0,"app-feedback-group",7),2&t){var n=e.$implicit,i=b.cc(2);b.ic("activity",n)("item",i.item)("items",i.items)("dqfs",i.dqfs)}}function _t(t,e){if(1&t&&(b.Qb(0,"div"),b.uc(1,Qt,1,4,"app-feedback-group",6),b.Pb()),2&t){var n=b.cc();b.yb(1),b.ic("ngForOf",n.activityData)}}function Ft(t,e){1&t&&(b.Qb(0,"p"),b.wc(1,"There is no feedback to display"),b.Pb())}var Et,Dt=((Et=function(){function e(){t(this,e),this.activityData=[],this.title="",this.item="activity",this.items="activities",this.isCollapsed=!1}return n(e,[{key:"toggleCollapse",value:function(){var t,e=this;this.isCollapsed=!this.isCollapsed,null===(t=this.groups)||void 0===t||t.forEach(function(t){return t.isCollapsed=e.isCollapsed})}}]),e}()).\u0275fac=function(t){return new(t||Et)},Et.\u0275cmp=b.Fb({type:Et,selectors:[["app-multi-feedback"]],viewQuery:function(t,e){var n;1&t&&b.Bc(xt,1),2&t&&b.oc(n=b.bc())&&(e.groups=n)},inputs:{activityData:"activityData",title:"title",item:"item",items:"items",dqfs:"dqfs"},decls:9,vars:4,consts:[[1,"feedback"],[1,"title","feedback-title"],[1,"toggle-collapse"],["type","button",1,"btn","btn-link",3,"click"],[4,"ngIf","ngIfElse"],["noActivityData",""],[3,"activity","item","items","dqfs",4,"ngFor","ngForOf"],[3,"activity","item","items","dqfs"]],template:function(t,e){if(1&t&&(b.Qb(0,"div",0),b.Qb(1,"h5",1),b.wc(2),b.Qb(3,"span",2),b.Qb(4,"button",3),b.ac("click",function(){return e.toggleCollapse()}),b.wc(5),b.Pb(),b.Pb(),b.Pb(),b.uc(6,_t,2,1,"div",4),b.Pb(),b.uc(7,Ft,2,0,"ng-template",null,5,b.vc)),2&t){var n=b.pc(8);b.yb(2),b.yc(" ",e.title," "),b.yb(3),b.yc(" Collapse/expand all ",e.items," "),b.yb(1),b.ic("ngIf",e.activityData.length>0)("ngIfElse",n)}},directives:[o.l,o.k,xt],styles:[".toggle-collapse[_ngcontent-%COMP%]{float:right;margin-right:-10px}.feedback-title[_ngcontent-%COMP%]{font-size:1.5em}.feedback-title[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{font-size:1em;margin-top:-10px}.feedback[_ngcontent-%COMP%]{border:1px solid #d3d3d3;padding:10px}"]}),Et),St=function(t){return["/validate",t]};function Rt(t,e){if(1&t&&(b.Qb(0,"div",9),b.Qb(1,"a",10),b.wc(2,"<< Return to your workspace"),b.Pb(),b.Pb()),2&t){var n=b.cc();b.yb(1),b.ic("routerLink",b.lc(1,St,n.tmpWorkspaceId))}}function qt(t,e){if(1&t&&b.Mb(0,"app-main-report-info",11),2&t){var n=b.cc();b.ic("id",n.dataset.id)}}function Tt(t,e){1&t&&(b.Qb(0,"div",12),b.Mb(1,"app-spinner",13),b.Qb(2,"span",14),b.wc(3,"Loading report..."),b.Pb(),b.Pb()),2&t&&(b.yb(1),b.ic("backColor","white"))}function At(t,e){if(1&t){var n=b.Rb();b.Qb(0,"div",15),b.Qb(1,"h2"),b.wc(2,"No data found."),b.Pb(),b.Qb(3,"p"),b.wc(4,"It looks like the url is not valid."),b.Pb(),b.Qb(5,"ul"),b.Qb(6,"li",16),b.ac("click",function(){return b.qc(n),b.cc().goBack()}),b.Qb(7,"button",17),b.wc(8,"Go back to the previous page."),b.Pb(),b.Pb(),b.Qb(9,"li"),b.Qb(10,"button",18),b.wc(11,"Go to the home page."),b.Pb(),b.Pb(),b.Pb(),b.Pb()}}function Lt(t,e){if(1&t&&(b.Qb(0,"div"),b.Mb(1,"app-single-feedback",25),b.Mb(2,"app-multi-feedback",26),b.Pb()),2&t){var n=b.cc(3);b.yb(1),b.ic("feedbackData",n.companyFeedback)("title","Activity file feedback")("item","activity")("items","activities"),b.yb(1),b.ic("activityData",n.activities)("title","Feedback per activity")("item","activity")("items","activities")("dqfs",n.data)}}function Bt(t,e){if(1&t&&(b.Qb(0,"div"),b.uc(1,Lt,3,9,"div",24),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.ic("ngIf","iati-activities"===n.filetype)}}function Nt(t,e){if(1&t&&(b.Qb(0,"div"),b.Mb(1,"app-single-feedback",25),b.Mb(2,"app-multi-feedback",26),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.ic("feedbackData",n.companyFeedback)("title","Organisation file feedback")("item","organisation")("items","organisations"),b.yb(1),b.ic("activityData",n.activities)("title","Organisation feedback")("item","organisation")("items","organisations")("dqfs",n.data)}}function Kt(t,e){if(1&t&&(b.Qb(0,"div"),b.Mb(1,"app-single-feedback",27),b.Pb()),2&t){var n=b.cc(2);b.yb(1),b.ic("feedbackData",n.companyFeedbackData)("title","Not an IATI file")}}function zt(t,e){if(1&t){var n=b.Rb();b.Qb(0,"div",19),b.Qb(1,"div",20),b.Qb(2,"h4"),b.wc(3,"Filters"),b.Pb(),b.Qb(4,"app-filter-severity",21),b.ac("selectedChanged",function(){return b.qc(n),b.cc().severitySelectedChanged()}),b.Pb(),b.Qb(5,"app-filter-category",22),b.ac("selectedChanged",function(){return b.qc(n),b.cc().categorySelectedChanged()}),b.Pb(),b.Pb(),b.Qb(6,"div",23),b.Qb(7,"h4"),b.wc(8,"Feedback"),b.Pb(),b.uc(9,Bt,2,1,"div",24),b.uc(10,Nt,3,9,"div",24),b.uc(11,Kt,2,2,"div",24),b.Pb(),b.Pb()}if(2&t){var i=b.cc();b.yb(4),b.ic("severities",i.severities),b.yb(1),b.ic("categories",i.categories),b.yb(4),b.ic("ngIf",i.companyFeedback),b.yb(1),b.ic("ngIf","iati-organisations"===i.filetype),b.yb(1),b.ic("ngIf","not-iati"===i.filetype)}}var jt,$t,Jt=((jt=function(){function e(n,i,a,c,o,s,r){var f=this;t(this,e),this.dataQualityFeedbackService=n,this.validatedIatiService=i,this.organisationService=a,this.logger=c,this.activateRoute=o,this.loader=s,this.location=r,this.dataset=null,this.isLoading=!1,this.data={},this.fileName="",this.isTestfiles=!1,this.tmpWorkspaceId="",this.activityData=[],this.activities=[],this.companyFeedbackData=[],this.companyFeedback=[],this.severities=[],this.sources=[],this.categories=[],this.filetype="",this.filterSeverity=function(t){return t.rulesets.some(function(t){return f.severities.some(function(e){return!0===e.show&&e.slug===t.severity})})},this.filterSource=function(t){return f.sources.some(function(e){return!0===e.show&&e.slug===t.src})},this.filterCategory=function(t){return f.categories.some(function(e){return!0===e.show&&e.id===t.category})},this.filterTypeMessage=function(t){return f.severities.some(function(e){return e.types.some(function(e){return!0===e.show&&e.id===t.id})})}}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.loaderSubscription=this.loader.loaderState.subscribe(function(e){t.isLoading=e.show}),this.severities=this.dataQualityFeedbackService.getSeverities(),this.sources=this.dataQualityFeedbackService.getSources(),this.paramsSubscription=this.activateRoute.params.subscribe(function(e){t.qParamsSubscription=t.activateRoute.queryParams.subscribe(function(n){t.isTestfiles=n.isTestfiles,n.isTestfiles?t.validatedIatiService.getIatiDatasetById(e.id).subscribe(function(e){var i=e.fileid.split(".").shift();t.fileName=e.filename,t.tmpWorkspaceId=e.tmpworkspaceId,t.loadData(i,n.isTestfiles)}):t.loadData(e.id,n.isTestfiles)})})}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.loaderSubscription)||void 0===t||t.unsubscribe(),this.paramsSubscription&&this.paramsSubscription.unsubscribe(),this.qParamsSubscription&&this.qParamsSubscription.unsubscribe()}},{key:"loadData",value:function(t,e){var n=this;this.loader.show(),e?this.dataQualityFeedbackService.getTestFilesDataQualityFeedbackById(t).subscribe(function(t){n.dataset=t,n.dataset&&(n.dataset.filename=n.fileName),n.setData(t)},function(t){n.logger.error("Error loadActivityData",t),n.loader.hide()}):this.organisationService.getIatiDatasetById(t).subscribe(function(t){t&&t.length?(n.dataset=t[0],n.dataQualityFeedbackService.getDataQualityFeedback(t[0].md5).subscribe(function(t){n.setData(t)},function(t){n.logger.error("Error loadActivityData",t),n.loader.hide()})):(n.activityData=void 0,n.companyFeedbackData=void 0,n.loader.hide())})}},{key:"setData",value:function(t){this.data=t,this.fileName=this.dataset.filename,t.feedback&&(this.companyFeedbackData=t.feedback),this.filetype=t.filetype,"iati-activities"===t.filetype&&t.activities&&(this.activityData=t.activities),"iati-organisations"===t.filetype&&t.organisations&&(this.activityData=t.organisations),void 0!==this.activityData||void 0!==this.companyFeedbackData?(this.loadCategories(),this.loadTypeMessages(this.activityData,this.companyFeedbackData),this.filterActivities(),this.loader.hide()):this.loader.hide()}},{key:"loadCategories",value:function(){var t=this,e=[];this.activityData.forEach(function(t){t.feedback.forEach(function(t){e.some(function(e){return e.id===t.category})||e.push({id:t.category,name:t.label})})}),this.companyFeedbackData.forEach(function(t){e.some(function(e){return e.id===t.category})||e.push({id:t.category,name:t.label})}),e.forEach(function(e){t.categories.push({id:e.id,name:e.name,count:null,order:0,show:!0})})}},{key:"loadTypeMessages",value:function(t,e){var n=this,i=[];t.forEach(function(t){t.feedback.forEach(function(t){t.messages.forEach(function(t){if(!i.some(function(e){return e.id===t.id})){var e={sev:"",id:"",text:""};e.sev=n.getfeedbackSeverity(t),e.id=t.id,e.text=t.text,i.push(e)}})})}),e.forEach(function(t){t.messages.forEach(function(t){if(!i.some(function(e){return e.id===t.id})){var e={sev:"",id:"",text:""};e.sev=n.getfeedbackSeverity(t),e.id=t.id,e.text=t.text,i.push(e)}})}),i.forEach(function(t){var e=n.severities.find(function(e){return e.id===t.sev});void 0!==e&&e.types.push({id:t.id,text:t.text,show:!0})})}},{key:"filterActivities",value:function(){var t=this;this.loader.show();var e=JSON.parse(JSON.stringify(this.activityData));this.filterCompanyFeedback(),e.forEach(function(e){e.feedback=e.feedback.filter(t.filterCategory)}),e.forEach(function(e){e.feedback.forEach(function(e){e.messages.forEach(function(e){e.rulesets=e.rulesets.filter(t.filterSource)})})}),e.forEach(function(e){e.feedback.forEach(function(e){e.messages=e.messages.filter(t.filterTypeMessage)})}),e.forEach(function(e){e.feedback.forEach(function(e){e.messages=e.messages.filter(t.filterSeverity)})}),e.forEach(function(t){t.feedback=t.feedback.filter(function(t){return t.messages.length>0})}),e=e.filter(function(t){return t.feedback.length>0}),this.activities=e,this.setSeverityCount(),this.setSourceCount(),this.setCategoryCount(),this.setTypeMessageCount(),this.loader.hide()}},{key:"filterCompanyFeedback",value:function(){var t=this,e=JSON.parse(JSON.stringify(this.companyFeedbackData));(e=e.filter(this.filterCategory)).forEach(function(e){e.messages.forEach(function(e){e.rulesets=e.rulesets.filter(t.filterSource)})}),e.forEach(function(e){e.messages=e.messages.filter(t.filterTypeMessage)}),e.forEach(function(e){e.messages=e.messages.filter(t.filterSeverity)}),e=e.filter(function(t){return t.messages.length>0}),this.companyFeedback=e}},{key:"setSeverityCount",value:function(){var t=this;this.severities.forEach(function(e){e.count=e.show?t.getIssueCount(e.slug):null})}},{key:"getIssueCount",value:function(t){var e=0;return this.activities.forEach(function(n){n.feedback.forEach(function(n){n.messages.forEach(function(n){n.rulesets.some(function(e){return e.severity===t})&&(e+=n.context.length)})})}),this.companyFeedbackData.forEach(function(n){n.messages.forEach(function(n){n.rulesets.some(function(e){return e.severity===t})&&(e+=n.context.length)})}),e}},{key:"setSourceCount",value:function(){var t=this;this.sources.forEach(function(e){e.count=e.show?t.getSourceCount(e.slug):null})}},{key:"getSourceCount",value:function(t){var e=0;return this.activities.forEach(function(n){n.feedback.forEach(function(n){n.messages.forEach(function(n){n.rulesets.some(function(e){return e.src===t})&&(e+=n.context.length)})})}),this.companyFeedbackData.forEach(function(n){n.messages.forEach(function(n){n.rulesets.some(function(e){return e.src===t})&&(e+=n.context.length)})}),e}},{key:"setCategoryCount",value:function(){var t=this;this.categories.forEach(function(e){e.count=e.show?t.getCategoryCount(e.id):null})}},{key:"getCategoryCount",value:function(t){var e=0;return this.activities.forEach(function(n){n.feedback.forEach(function(n){n.category===t&&n.messages.forEach(function(t){e+=t.context.length})})}),this.companyFeedbackData.forEach(function(n){n.category===t&&n.messages.forEach(function(t){e+=t.context.length})}),e}},{key:"setTypeMessageCount",value:function(){var t=this;this.severities.forEach(function(e){e.types.forEach(function(e){e.count=e.show?t.getTypeMessageCount(e.id):null})}),this.severities.forEach(function(t){t.types.sort(function(t,e){return e.count-t.count})})}},{key:"getTypeMessageCount",value:function(t){var e=0;return this.activities.forEach(function(n){n.feedback.forEach(function(n){n.messages.forEach(function(n){n.id===t&&(e+=n.context.length)})})}),this.companyFeedbackData.forEach(function(n){n.messages.forEach(function(n){n.id===t&&(e+=n.context.length)})}),e}},{key:"severitySelectedChanged",value:function(){this.filterActivities()}},{key:"sourceSelectedChanged",value:function(){this.filterActivities()}},{key:"categorySelectedChanged",value:function(){this.filterActivities()}},{key:"typesSelectedChanged",value:function(){this.filterActivities()}},{key:"getfeedbackSeverity",value:function(t){return t.rulesets.some(function(t){return"danger"===t.severity})?"error":t.rulesets.some(function(t){return"critical"===t.severity})?"critical":t.rulesets.some(function(t){return"warning"===t.severity})?"warning":t.rulesets.some(function(t){return"info"===t.severity})?"improvement":t.rulesets.some(function(t){return"success"===t.severity})?"notification":"other"}},{key:"goBack",value:function(){this.location.back()}}]),e}()).\u0275fac=function(t){return new(t||jt)(b.Lb(h),b.Lb(y.a),b.Lb(m.a),b.Lb(p.a),b.Lb(s.a),b.Lb(v.a),b.Lb(o.h))},jt.\u0275cmp=b.Fb({type:jt,selectors:[["app-main"]],decls:11,vars:6,consts:[[1,"container-fluid"],["class","content-block",4,"ngIf"],[1,"row","alert","alert-light"],[1,"col"],[3,"id",4,"ngIf"],[3,"data"],["class","alert alert-info","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","row",4,"ngIf"],[1,"content-block"],[3,"routerLink"],[3,"id"],["role","alert",1,"alert","alert-info"],[3,"backColor"],[1,"loading-text"],["role","alert",1,"alert","alert-warning"],[3,"click"],["type","button",1,"btn","btn-link"],["routerLink","\\","type","button",1,"btn","btn-link"],[1,"row"],[1,"col-md-4","filters"],[3,"severities","selectedChanged"],[3,"categories","selectedChanged"],[1,"col-md-8","results"],[4,"ngIf"],[3,"feedbackData","title","item","items"],[3,"activityData","title","item","items","dqfs"],[3,"feedbackData","title"]],template:function(t,e){1&t&&(b.Qb(0,"div",0),b.uc(1,Rt,3,3,"div",1),b.Qb(2,"div",2),b.Qb(3,"div",3),b.Qb(4,"h1"),b.wc(5,"File validation report"),b.Pb(),b.uc(6,qt,1,1,"app-main-report-info",4),b.Mb(7,"app-iati-info",5),b.Pb(),b.Pb(),b.uc(8,Tt,4,1,"div",6),b.uc(9,At,12,0,"div",7),b.uc(10,zt,12,5,"div",8),b.Pb()),2&t&&(b.yb(1),b.ic("ngIf",e.tmpWorkspaceId),b.yb(5),b.ic("ngIf",e.dataset),b.yb(1),b.ic("data",e.data),b.yb(1),b.ic("ngIf",e.isLoading),b.yb(1),b.ic("ngIf",void 0===e.activityData&&void 0===e.companyFeedbackData&&!e.isLoading),b.yb(1),b.ic("ngIf",(void 0!==e.activityData||void 0!==e.companyFeedbackData)&&!e.isLoading))},directives:[o.l,O,s.f,Q,_.a,s.e,W,tt,mt,Dt],styles:[".loading-text[_ngcontent-%COMP%]{margin-left:12px}.btn-link[_ngcontent-%COMP%]{color:#fff}.content-block[_ngcontent-%COMP%]{margin-bottom:2em;font-size:1.5em}"]}),jt),Vt=a("PCNd"),Gt=a("oE6s"),Wt=[{path:"files/:id",component:Jt},{path:"",redirectTo:"/404dqf",pathMatch:"full"}],Xt=(($t=function e(){t(this,e)}).\u0275mod=b.Jb({type:$t}),$t.\u0275inj=b.Ib({factory:function(t){return new(t||$t)},providers:[h],imports:[[o.b,s.g.forChild(Wt),r.g,f.b,Vt.a,Gt.ValidateIatiModule,d.b],s.g]}),$t)}}])}();