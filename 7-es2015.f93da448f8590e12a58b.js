(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{V8Rk:function(t,i,n){"use strict";n.r(i),n.d(i,"OrganisationsModule",function(){return S});var s=n("ofXK"),e=n("3Pt+"),o=n("tyNb"),a=n("mrSG"),r=n("fXoL"),c=n("iSyK"),h=n("SF6U"),l=n("b6Gx"),u=n("7o/Q"),g=n("D0XW");class d{constructor(t,i){this.dueTime=t,this.scheduler=i}call(t,i){return i.subscribe(new b(t,this.dueTime,this.scheduler))}}class b extends u.a{constructor(t,i,n){super(t),this.dueTime=i,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(p,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function p(t){t.debouncedNext()}var f=n("/uUt");const m=["searchInput"];let w=(()=>{class t{constructor(){this.search=new r.n,this.term=new e.d}ngOnInit(){this.term.valueChanges.pipe(function(t,i=g.a){return n=>n.lift(new d(t,i))}(300)).pipe(Object(f.a)()).subscribe(t=>this.searchOrganisations())}searchOrganisations(){this.search.emit(this.term.value)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-organisations-search"]],viewQuery:function(t,i){if(1&t&&r.Bc(m,1),2&t){let t;r.oc(t=r.bc())&&(i.searchInput=t.first)}},outputs:{search:"search"},decls:6,vars:1,consts:[[1,"search-container"],[1,"organisation-search-form"],["type","text","placeholder","Organisation name","appAutofocus","",1,"search-input",3,"formControl"],["searchInput",""],[1,"btn","btn-primary","iati-button",3,"click"]],template:function(t,i){1&t&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Mb(2,"input",2,3),r.Qb(4,"button",4),r.ac("click",function(){return i.searchOrganisations()}),r.wc(5,"Search"),r.Pb(),r.Pb(),r.Pb()),2&t&&(r.yb(2),r.ic("formControl",i.term))},directives:[e.b,e.j,e.e],styles:[".organisation-search-form[_ngcontent-%COMP%]{width:500px;display:flex;flex-flow:row wrap;justify-content:space-around}@media (max-width:600px){.organisation-search-form[_ngcontent-%COMP%]{width:auto}}.organisation-search-form[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:350px;font-size:1.6rem;line-height:1.25;color:#464a4c;padding:.9rem 1.4rem;border:1px solid rgba(0,0,0,.14902);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (max-width:600px){.organisation-search-form[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}}.organisation-search-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;border-radius:0!important;text-align:center}@media (max-width:600px){.organisation-search-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:20px;margin-bottom:10px;padding-top:15px;padding-bottom:15px}}"]}),t})();const O=function(t){return["/organisation/",t]};let v=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-organisations-list-item"]],inputs:{organisation:"organisation"},decls:4,vars:4,consts:[[1,"row","organisation"],[1,"col"],[3,"routerLink"]],template:function(t,i){1&t&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"a",2),r.wc(3),r.Pb(),r.Pb(),r.Pb()),2&t&&(r.yb(2),r.ic("routerLink",r.lc(2,O,i.organisation.name)),r.yb(1),r.yc(" ",i.organisation.title," "))},directives:[o.f],styles:[".organisation[_ngcontent-%COMP%]{font-size:1.5em}"]}),t})();function y(t,i){1&t&&r.Mb(0,"app-organisations-list-item",2),2&t&&r.ic("organisation",i.$implicit)}let x=(()=>{class t{constructor(){this.organisations=[]}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-organisations-list"]],inputs:{organisations:"organisations"},decls:4,vars:2,consts:[[1,"found-organization"],[3,"organisation",4,"ngFor","ngForOf"],[3,"organisation"]],template:function(t,i){1&t&&(r.Qb(0,"div",0),r.wc(1),r.Pb(),r.Mb(2,"hr"),r.uc(3,y,1,1,"app-organisations-list-item",1)),2&t&&(r.yb(1),r.yc("Found ",i.organisations.length," organisations."),r.yb(2),r.ic("ngForOf",i.organisations))},directives:[s.k,v],styles:[".found-organization[_ngcontent-%COMP%]{font-size:1.5em}"]}),t})();function P(t,i){1&t&&(r.Qb(0,"div",4),r.wc(1,"Searching ...."),r.Pb())}const C=[{path:"",component:(()=>{class t{constructor(t,i,n){this.organisationService=t,this.logger=i,this.loader=n,this.organisations=[],this.filteredOrganisations=[],this.isSearching=!1}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){this.searchOrganisation("")})}searchOrganisation(t){this.isSearching=!0,this.loader.show(),this.organisations&&0!==this.organisations.length?this.filterOrganisations(t):this.organisationService.getOrganisations().subscribe(t=>this.organisations=t,t=>{console.log(t),this.isSearching=!1,this.loader.hide()},()=>{this.filterOrganisations(t)})}filterOrganisations(t){this.filteredOrganisations=t&&t.trim()?this.organisations.filter(i=>new RegExp(t,"gi").test(i.title)).sort((t,i)=>(t.title||"").toString().toLowerCase().localeCompare((i.title||"").toString().toLowerCase())):this.organisations.slice(0).sort((t,i)=>(t.title||"").toString().toLowerCase().localeCompare((i.title||"").toString().toLowerCase())),this.isSearching=!1,this.loader.hide()}}return t.\u0275fac=function(i){return new(i||t)(r.Lb(c.a),r.Lb(h.a),r.Lb(l.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-organisations"]],decls:8,vars:2,consts:[[1,"container"],[3,"search"],["class","text-info",4,"ngIf"],[3,"organisations"],[1,"text-info"]],template:function(t,i){1&t&&(r.Qb(0,"div",0),r.Qb(1,"h1"),r.wc(2,"Public data viewer"),r.Pb(),r.Qb(3,"p"),r.wc(4,"Search for an organisation and access the validation results on their public IATI data. The organisation list and the public IATI data is regularly refreshed from the IATI Registry. New organisations and IATI files will not immediately be visible here, but after at most a day. "),r.Pb(),r.Qb(5,"app-organisations-search",1),r.ac("search",function(t){return i.searchOrganisation(t)}),r.Pb(),r.uc(6,P,2,0,"div",2),r.Mb(7,"app-organisations-list",3),r.Pb()),2&t&&(r.yb(6),r.ic("ngIf",i.isSearching),r.yb(1),r.ic("organisations",i.filteredOrganisations))},directives:[w,s.l,x],styles:[""]}),t})()},{path:"",redirectTo:"/404dqf",pathMatch:"full"}];let S=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(i){return new(i||t)},providers:[c.a],imports:[[s.b,o.g.forChild(C),e.g,e.n,o.g],o.g]}),t})()}}]);