{"version":3,"sources":["webpack:///src/app/views/data-quality-feedback/feedback-item/feedback-item.component.html","webpack:///src/app/views/data-quality-feedback/feedback-item/feedback-item.component.ts","webpack:///src/app/views/data-quality-feedback/filter-severity-item/filter-severity-item.component.ts","webpack:///src/app/views/data-quality-feedback/filter-severity-item/filter-severity-item.component.html","webpack:///src/app/views/data-quality-feedback/iati-info/iati-info.component.html","webpack:///src/app/views/data-quality-feedback/iati-info/iati-info.component.ts","webpack:///src/app/views/data-quality-feedback/shared/checkbox/checkbox.component.ts","webpack:///src/app/views/data-quality-feedback/shared/checkbox/checkbox.component.html","webpack:///src/app/views/data-quality-feedback/filter-type-severity/filter-type-severity.component.ts","webpack:///src/app/views/data-quality-feedback/filter-type-severity/filter-type-severity.component.html","webpack:///src/app/views/data-quality-feedback/main-report-info/main-report-info.component.html","webpack:///src/app/views/data-quality-feedback/main-report-info/main-report-info.component.ts","webpack:///src/app/views/data-quality-feedback/main/main.component.html","webpack:///src/app/views/data-quality-feedback/main/main.component.ts","webpack:///src/app/views/data-quality-feedback/single-feedback/single-feedback.component.html","webpack:///src/app/views/data-quality-feedback/single-feedback/single-feedback.component.ts","webpack:///src/app/views/data-quality-feedback/feedback-group/feedback-group.component.html","webpack:///src/app/views/data-quality-feedback/feedback-group/feedback-group.component.ts","webpack:///src/app/views/data-quality-feedback/filter-type/filter-type.component.ts","webpack:///src/app/views/data-quality-feedback/filter-type/filter-type.component.html","webpack:///src/app/views/data-quality-feedback/filter-source/filter-source.component.ts","webpack:///src/app/views/data-quality-feedback/filter-source/filter-source.component.html","webpack:///src/app/views/data-quality-feedback/filter-category/filter-category.component.ts","webpack:///src/app/views/data-quality-feedback/filter-category/filter-category.component.html","webpack:///src/app/views/data-quality-feedback/data-quality-feedback.module.ts","webpack:///src/app/views/data-quality-feedback/filter-severity/filter-severity.component.ts","webpack:///src/app/views/data-quality-feedback/filter-severity/filter-severity.component.html","webpack:///src/app/views/data-quality-feedback/shared/data-quality-feedback.service.ts","webpack:///src/app/views/data-quality-feedback/filter-type-message/filter-type-message.component.ts","webpack:///src/app/views/data-quality-feedback/filter-type-message/filter-type-message.component.html","webpack:///src/app/views/data-quality-feedback/multi-feedback/multi-feedback.component.ts","webpack:///src/app/views/data-quality-feedback/multi-feedback/multi-feedback.component.html"],"names":["FeedbackItemComponent","dataQualityFeedbackService","sortData","feedback","errors","sort","compareSeverity","a","b","getSeverity","message","severity","category","getCategoryLabel","FilterSeverityItemComponent","selectedChanged","isCollapsed","types","every","x","show","emit","forEach","selectionChanged","length","count","collapse","IatiInfoComponent","validationReport","documentInfo","url","split","pop","CheckboxComponent","checked","checkedChange","name","checkedChanged","FilterTypeSeverityComponent","type","MainReportInfoComponent","logger","organisationInfo","MainComponent","validatedIatiService","organisationService","activateRoute","loader","location","dataset","isLoading","data","fileName","isTestfiles","tmpWorkspaceId","activityData","activities","companyFeedback","severities","sources","categories","validationReportResponse","fileErrors","fileErrorsOriginal","activityErrors","activityErrorsOriginal","fileType","filterSeverity","some","sev","slug","filterSource","ruleset","s","src","filterCategory","c","id","filterTypeMessage","t","m","loaderSubscription","loaderState","subscribe","state","getSeverities","getSources","paramsSubscription","params","qParamsSubscription","queryParams","qParams","getIatiDatasetById","iatiTestDataSet","theFileId","fileid","shift","filename","tmpworkspaceId","loadData","unsubscribe","getTestFilesDataQualityFeedbackById","setData","error","hide","getDocument","getOrganisationById","publisher","orgInfo","getValidationReport","validationInfo","report","undefined","reduce","acc","actOrgFile","identifier","filter","loadCategories","loadTypeMessages","filterActivities","uniqueCat","u","push","order","errorCat","newType","text","find","filtered","JSON","parse","stringify","filterCompanyFeedback","act","fb","setSeverityCount","setCategoryCount","setTypeMessageCount","filteredFeedback","getIssueCount","mes","context","cat","getCategoryCount","errorCatGroup","getTypeMessageCount","typeId","back","SingleFeedbackComponent","feedbackData","title","item","items","catGroup","err","FeedbackGroupComponent","activity","dqfs","filetype","encodeURIComponent","newLineFound","indexOf","substring","code","overrides","$event","stopPropagation","FilterTypeComponent","y","FilterSourceComponent","console","log","FilterCategoryComponent","routes","path","component","redirectTo","pathMatch","DataQualityFeedbackModule","forChild","FilterSeverityComponent","DataQualityFeedbackService","http","urlApiIatiFile","window","__env","apiDataworkBench","urlApiIatiTestFile","urlApiIatiDataSet","urlApiOrganisation","urlApiValidationReport","validatorServicesUrl","documentId","get","pipe","handleError","md5","inId","reportInfo","organisationName","organisationSlug","urlPublisher","datas","description","schema","information","financial","identifiers","organisation","participating","geo","classifications","documents","performance","iati","operation","result","FilterTypeMessageComponent","typeMessage","MultiFeedbackComponent","groups","toggleCollapse"],"mappings":"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","file":"views-data-quality-feedback-data-quality-feedback-module-es5.js","sourcesContent":["<div class=\"feedback\">\n  <div class=\"category-label\">{{getCategoryLabel(feedback.category)}}</div>\n  <ul class=\"feedback-list\">\n    <li *ngFor=\"let mes of feedback.errors\" class=\"message {{getfeedbackColor(mes)}}\"   >\n      <span class=\"message-text\" >{{mes.message}}</span>\n      <span class=\"message-id d-inline float-right\">\n        {{mes.id}}\n        <!-- <span *ngFor=\"let ruleset of mes.rulesets\">\n          <a [hidden]=\"ruleset.src==null\" href=\"{{ruleset.src}}\" target=\"_blank\" title=\"Open guidance in a new window\">(see guidance)</a>\n        </span> -->\n      </span>\n      <ul [hidden]=\"mes.context.length===1 && mes.context[0].text===''\">\n        <li *ngFor=\"let con of mes.context\" class=\"context\">{{con.text}}</li>\n      </ul>\n    </li>\n  </ul>\n</div>\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Feedback, Message } from '../shared/feedback';\nimport { DataQualityFeedbackService } from './../shared/data-quality-feedback.service';\n\n@Component({\n  selector: 'app-feedback-item',\n  templateUrl: './feedback-item.component.html',\n  styleUrls: ['./feedback-item.component.scss']\n})\nexport class FeedbackItemComponent implements OnInit {\n  @Input() feedback: Feedback;\n\n  constructor(private dataQualityFeedbackService: DataQualityFeedbackService) {\n   }\n\n  ngOnInit() {\n    this.sortData();\n  }\n\n  sortData = () =>  {\n    // Sort the messages based on severity\n    this.feedback.errors.sort(this.compareSeverity);\n  };\n\n  compareSeverity = (a: Message, b: Message) => this.getSeverity(a) - this.getSeverity(b);\n\n  getSeverity = (message: Message) => {\n    if (message.severity === 'critical') {\n      return 1;\n    } else if (message.severity === 'error') {\n      return 2;\n    } else if (message.severity === 'warning') {\n      return 2;\n    } else if (message.severity === 'info') {\n      return 3;\n    } else if (message.severity === 'success') {\n      return 4;\n    } else {\n      return 9;\n    }\n  };\n\n  getfeedbackColor(message: Message): string {\n    if (message.severity === 'error') {\n      return 'error';\n    } else if (message.severity === 'critical') {\n      return 'critical';\n    } else if (message.severity === 'warning') {\n      return 'warning';\n    } else if (message.severity === 'info') {\n      return 'improvement';\n    } else if (message.severity === 'success') {\n      return 'notification';\n    } else {\n      return 'other';\n    }\n  }\n\n  getCategoryLabel(category: string): string {\n    return this.dataQualityFeedbackService.getCategoryLabel(category);\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { Severity } from '../shared/severity';\n\n@Component({\n  selector: 'app-filter-severity-item',\n  templateUrl: './filter-severity-item.component.html',\n  styleUrls: ['./filter-severity-item.component.scss']\n})\nexport class FilterSeverityItemComponent implements OnInit {\n  @Input() severity: Severity;\n  @Output() selectedChanged = new EventEmitter<string>();\n\n  isCollapsed = true;\n\n  constructor() { }\n\n  ngOnInit() {\n    // this.severity.types.sort( (a, b) =>  b.count - a.count );\n  }\n\n  collapse() {\n    this.isCollapsed = !this.isCollapsed;\n  }\n\n  allSelected(): boolean {\n    return this.severity.types.every(x => x.show === true);\n  }\n\n  selectionChanged() {\n    this.selectedChanged.emit('');\n  }\n\n  selectAll(): void {\n    this.severity.types.forEach(x => x.show = true);\n    this.selectionChanged();\n  }\n\n  unSelectAll(): void {\n    this.severity.types.forEach(x => x.show = false);\n    this.selectionChanged();\n  }\n\n  totalTypes(): number {\n    return this.severity.types.length;\n  }\n\n  totalTypesSelected(): number {\n    let count = 0;\n\n    this.severity.types.forEach(x => {\n      if (x.show === true) {\n        count++;\n      }\n    });\n    return count;\n  }\n\n\n}\n","<li class=\"list-group-item\" [className]=\"'list-group-item ' + severity.id\" [ngClass]=\"{'hidden': severity.types.length===0}\">\n  <div class=\"severity-heading row\">\n    <div class=\"col title-col\" (click)=\"collapse()\">\n      <span ngClass=\"{'unselected':!severity.show}\"> {{ severity.name }}: {{ severity.types.length }} types</span>\n      <span *ngIf=\"!allSelected()\" class=\"badge badge-light text-danger float-right messages-selected-count\"> ({{ totalTypesSelected() }} of {{ totalTypes() }} messages selected.) </span>\n      <!-- <span class=\"select\">\n        <app-checkbox [(checked)]=\"severity.show\" [name]=\"'filterSev' + severity.name\" (checkedChange)=\"selectionChanged()\"></app-checkbox>\n      </span> -->\n    </div>\n\n    <div class=\"col-auto collapse-col\">\n        <app-checkbox [(checked)]=\"severity.show\" [name]=\"'filterSrc' + severity.name\" (checkedChange)=\"selectionChanged()\"></app-checkbox>\n      <button type=\"button\" class=\"btn btn-outline-light collapser\" (click)=\"collapse()\">\n        <span *ngIf=\"!isCollapsed\"><img src=\"assets/icons/arrow_down_24_white.svg\" alt=\"icon arrow down\"></span>\n        <span *ngIf=\"isCollapsed\"><img src=\"assets/icons/arrow_up_24_white.svg\" alt=\"icon arrow up\"></span>\n      </button>\n    </div>\n  </div>\n</li>\n\n\n<div class=\"type-messages\" [ngbCollapse]=\"isCollapsed\">\n  <li *ngIf=\"severity.types.length!==0\" class=\"list-group-item filter-row\">\n    {{ severity.description }}\n    <span *ngIf=\"allSelected()\" class=\"show-label\"><button type=\"button\" class=\"btn btn-link\" (click)=\"unSelectAll()\">Unselect all</button></span>\n    <span *ngIf=\"!allSelected()\" class=\"show-label\"><button type=\"button\" class=\"btn btn-link\" (click)=\"selectAll()\">Select all</button></span>\n  </li>\n  <app-filter-type-message *ngFor=\"let mes of severity.types\" [typeMessage]=\"mes\" (selectedChanged)=\"selectionChanged()\"></app-filter-type-message>\n</div>\n","<p>\n  <span *ngIf=\"validationReport.iatiVersion\"\n    >IATI version: {{ validationReport.iatiVersion }}</span\n  >\n  <span *ngIf=\"validationReport.fileType\">\n    | Type: {{ validationReport.fileType }}</span\n  >\n  <span *ngIf=\"documentInfo.validation_created\">\n    | Report Generated:\n    {{ documentInfo.validation_created | date: \"yyyy-MM-dd HH:mm (z)\" }}</span\n  >\n</p>\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Dqfs } from '../shared/feedback';\n\n@Component({\n  selector: 'app-iati-info',\n  templateUrl: './iati-info.component.html',\n  styleUrls: ['./iati-info.component.scss']\n})\nexport class IatiInfoComponent implements OnInit {\n  @Input() validationReport = {} as any;\n  @Input() documentInfo = {} as any;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  fileName(): string {\n    if ('url' in this.documentInfo) {\n      return this.documentInfo.url.split('/').pop();\n    } else {\n      return 'No filename available';\n    }\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'app-checkbox',\n  templateUrl: './checkbox.component.html',\n  styleUrls: ['./checkbox.component.scss']\n})\nexport class CheckboxComponent implements OnInit {\n  @Input() checked = false;\n  @Output() checkedChange: EventEmitter<boolean> = new EventEmitter();\n  // unique name is necessary for the input control\n  @Input() name = '';\n\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  checkedChanged() {\n    this.checkedChange.emit(this.checked);\n  }\n\n}\n","<div class=\"custom-control custom-checkbox d-inline\">\n  <input [(ngModel)]=\"checked\" (change)=\"checkedChanged()\" type=\"checkbox\" class=\"custom-control-input\" [attr.id]=\"name\" [attr.name]=\"name\">\n  <label class=\"custom-control-label\" [attr.for]=\"name\"><ng-content></ng-content></label>\n</div>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { TypeMessage } from './../shared/type-message';\nimport { TypeSeverity } from './../shared/type-severity';\n\n@Component({\n  selector: 'app-filter-type-severity',\n  templateUrl: './filter-type-severity.component.html',\n  styleUrls: ['./filter-type-severity.component.scss']\n})\nexport class FilterTypeSeverityComponent implements OnInit {\n  @Input() type: TypeSeverity;\n  @Output() selectedChanged = new EventEmitter<string>();\n\n  isCollapsed = true;\n\n  constructor() { }\n\n  ngOnInit() {\n    this.type.types.sort( (a, b) =>  b.count - a.count );\n  }\n\n  collapse() {\n    this.isCollapsed = ! this.isCollapsed;\n  }\n\n  allSelected(): boolean {\n    return this.type.types.every(x => x.show === true);\n }\n\n  selectionChanged() {\n    this.selectedChanged.emit('');\n  }\n\n  selectAll(): void {\n    this.type.types.forEach(x => x.show = true);\n    this.selectionChanged();\n  }\n}\n","<li class=\"list-group-item\" [className]=\"'list-group-item ' + type.severity\" [ngClass]=\"{'hidden': type.types.length===0}\">\n  <div class=\"type-heading row\">\n    <div class=\"col title-col\" (click)=\"collapse()\">\n      <span class=\"severity-count\">{{type.count}}</span>\n      <span [ngClass]=\"{'unselected': !type.show}\">{{ type.severity }}</span>\n    </div>\n    <div class=\"col-auto collapse-col\">\n      <button type=\"button\" class=\"btn btn-outline-light collapser\" (click)=\"collapse()\">\n        <span *ngIf=\"!isCollapsed\">-</span>\n        <span *ngIf=\"isCollapsed\">+</span>\n      </button>\n    </div>\n  </div>\n</li>\n\n<div class=\"type-messages\" [ngbCollapse]=\"isCollapsed\">\n  <app-filter-type-message *ngFor=\"let mes of type.types\" [typeMessage]=\"mes\" (selectedChanged)=\"selectionChanged()\"></app-filter-type-message>\n</div>\n","<h3><a [routerLink]=\"['/organisation', organisationInfo.name]\" >{{ organisationInfo.title }}</a> - <a *ngIf=\"documentInfo.url\" href=\"{{ documentInfo.url }}\">{{ fileName() }}</a></h3>\n","import { ReportInfo } from './../shared/report-info';\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { LogService } from './../../../core/logging/log.service';\nimport { DataQualityFeedbackService } from './../shared/data-quality-feedback.service';\n\n@Component({\n  selector: 'app-main-report-info',\n  templateUrl: './main-report-info.component.html',\n  styleUrls: ['./main-report-info.component.scss']\n})\nexport class MainReportInfoComponent implements OnInit {\n  @Input() documentInfo = {} as any;\n  @Input() organisationInfo = {} as any;\n\n  constructor(private logger: LogService) { }\n\n  ngOnInit() {\n  }\n\n  fileName(): string {\n    if ('url' in this.documentInfo) {\n      return this.documentInfo.url.split('/').pop();\n    } else {\n      return 'No filename available';\n    }\n  }\n}\n","<div class=\"container-fluid\">\n  <div class=\"content-block\" *ngIf=\"tmpWorkspaceId\">\n    <a [routerLink]=\"['/validate', tmpWorkspaceId]\" >&lt;&lt; Return to your workspace</a>\n  </div>\n  <div class=\"row alert alert-light\">\n    <div class=\"col\">\n      <h1>File validation report</h1>\n      <app-main-report-info *ngIf=\"documentInfo && organisationInfo\" [documentInfo]=\"documentInfo\" [organisationInfo]=\"organisationInfo\"></app-main-report-info>\n      <app-iati-info *ngIf=\"documentInfo && validationReport\" [documentInfo]=\"documentInfo\" [validationReport]=\"validationReport\"></app-iati-info>\n    </div>\n  </div>\n\n  <div *ngIf=\"isLoading\" class=\"alert alert-info\" role=\"alert\">\n    <app-spinner [backColor]=\"'white'\"></app-spinner>\n    <span class=\"loading-text\">Loading report...</span>\n  </div>\n  <div *ngIf=\"documentInfo===undefined && validationReport===undefined && !isLoading \" class=\"alert alert-warning\"\n    role=\"alert\">\n    <h2>No data found.</h2>\n    <p>It looks like the url is not valid.</p>\n    <ul>\n      <li (click)=\"goBack()\">\n        <button type=\"button\" class=\"btn btn-link\">Go back to the previous page.</button>\n      </li>\n      <li>\n        <button routerLink=\"\\\" type=\"button\" class=\"btn btn-link\">Go to the home page.</button>\n      </li>\n    </ul>\n  </div>\n\n  <div *ngIf=\"(documentInfo!==undefined || validationReport!==undefined) && !isLoading\" class=\"row\">\n    <div class=\"col-md-4 filters\">\n      <h4>Filters</h4>\n      <app-filter-severity [severities]=\"severities\" (selectedChanged)=\"severitySelectedChanged()\">\n      </app-filter-severity>\n      <app-filter-category [categories]=\"categories\" (selectedChanged)=\"categorySelectedChanged()\">\n      </app-filter-category>\n    </div>\n    <div class=\"col-md-8 results\">\n      <h4>Feedback</h4>\n      <div *ngIf=\"validationReport\">\n        <!-- Determine which components to display -->\n        <div *ngIf=\"fileType==='iati-activities'\">\n          <app-single-feedback [feedbackData]=\"fileErrors\" [title]=\"'Activity file feedback'\" [item]=\"'activity'\" [items]=\"'activities'\"></app-single-feedback>\n          <app-multi-feedback [activityData]=\"activityErrors\" [title]=\"'Feedback per activity'\" [item]=\"'activity'\" [items]=\"'activities'\" [dqfs]=\"data\"></app-multi-feedback>\n        </div>\n\n      </div>\n      <div *ngIf=\"fileType==='iati-organisations'\">\n        <app-single-feedback [feedbackData]=\"fileErrors\" [title]=\"'Organisation file feedback'\" [item]=\"'organisation'\" [items]=\"'organisations'\" ></app-single-feedback>\n        <app-multi-feedback [activityData]=\"activityErrors\" [title]=\"'Organisation feedback'\" [item]=\"'organisation'\" [items]=\"'organisations'\" [dqfs]=\"data\"></app-multi-feedback>\n      </div>\n      <div *ngIf=\"fileType===''\">\n        <app-single-feedback [feedbackData]=\"fileErrors\" [title]=\"'Not an IATI file'\"></app-single-feedback>\n      </div>\n\n\n    </div>\n  </div>\n</div>\n","import { Location } from '@angular/common';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { LoaderService } from '../../../core/loader/loader.service';\nimport { OrganisationService } from '../../../organisation/shared/organisation.service';\nimport { ValidatedIatiService } from '../../../validate-iati/shared/validated-iati.service';\nimport { Activity, Dqfs, Feedback, Message, Report, Ruleset, ReportResponse } from '../shared/feedback';\nimport { Document } from 'src/app/shared/document';\nimport { Severity } from '../shared/severity';\nimport { LoaderState } from './../../../core/loader/loader';\nimport { LogService } from './../../../core/logging/log.service';\nimport { Category } from './../shared/category';\nimport { DataQualityFeedbackService } from './../shared/data-quality-feedback.service';\nimport { Source } from './../shared/source';\nimport { Organisation } from 'src/app/shared/organisation';\nimport * as _ from 'lodash';\n\n\n\n@Component({\n  selector: 'app-main',\n  templateUrl: './main.component.html',\n  styleUrls: ['./main.component.scss']\n})\nexport class MainComponent implements OnInit, OnDestroy {\n  dataset = null;\n  isLoading = false;\n  data: Dqfs = {} as Dqfs;\n  fileName = '';\n  isTestfiles = false;\n  tmpWorkspaceId = '';\n  activityData: Activity[] = [];\n  activities: Activity[] = [];\n  companyFeedback: Feedback[] = [];\n  severities: Severity[] = [];\n  sources: Source[] = [];\n  categories: Category[] = [];\n\n  documentInfo: Document;\n  organisationInfo: Organisation;\n  validationReportResponse: ReportResponse = {} as ReportResponse;\n  validationReport: Report = {} as Report;\n\n  fileErrors: Feedback[] = [];\n  fileErrorsOriginal: Feedback[] = [];\n  activityErrors: Activity[] = [];\n  activityErrorsOriginal: Activity[] = [];\n\n  public dqfs: Dqfs | undefined;\n  public fileType = '';\n  private loaderSubscription: Subscription | undefined;\n  private paramsSubscription: Subscription | undefined;\n  private qParamsSubscription: Subscription | undefined;\n\n  constructor(private dataQualityFeedbackService: DataQualityFeedbackService,\n    private validatedIatiService: ValidatedIatiService,\n    private organisationService: OrganisationService,\n    private logger: LogService,\n    private activateRoute: ActivatedRoute,\n    private loader: LoaderService,\n    private location: Location) {\n  }\n\n  ngOnInit() {\n    this.loaderSubscription = this.loader.loaderState\n      .subscribe((state: LoaderState) => {\n        this.isLoading = state.show;\n      });\n    this.severities = this.dataQualityFeedbackService.getSeverities();\n    this.sources = this.dataQualityFeedbackService.getSources();\n\n    this.paramsSubscription = this.activateRoute\n      .params\n      .subscribe(params => {\n        this.qParamsSubscription = this.activateRoute.queryParams.subscribe(\n          qParams => {\n            this.isTestfiles = qParams.isTestfiles;\n\n            if (qParams.isTestfiles) {\n              this.validatedIatiService.getIatiDatasetById(params['id']).subscribe(iatiTestDataSet => {\n\n                const theFileId = iatiTestDataSet.fileid.split('.').shift();\n                this.fileName = iatiTestDataSet.filename;\n                this.tmpWorkspaceId = iatiTestDataSet.tmpworkspaceId;\n                this.loadData(theFileId as string, qParams.isTestfiles);\n              });\n            } else {\n              this.loadData(params['id'], qParams.isTestfiles);\n            }\n          }\n        );\n      });\n  }\n\n  ngOnDestroy() {\n    this.loaderSubscription?.unsubscribe();\n    if (this.paramsSubscription) {\n      this.paramsSubscription.unsubscribe();\n\n    }\n    if (this.qParamsSubscription) {\n      this.qParamsSubscription.unsubscribe();\n\n    }\n  }\n\n  loadData(id: string, isTestfiles: boolean) {\n    this.loader.show();\n\n    if (isTestfiles) {\n      this.dataQualityFeedbackService.getTestFilesDataQualityFeedbackById(id).subscribe(data => {\n        this.dataset = data as any;\n          if (this.dataset) {\n            (this.dataset as any)['filename'] = this.fileName;\n          }\n          this.setData(data);\n        },\n        error => {\n          this.logger.error('Error loadActivityData', error);\n          this.loader.hide();\n        }\n      );\n    } else {\n      this.organisationService.getDocument(id).subscribe(documentInfo => {\n        if (length in documentInfo && documentInfo.length === 1) {\n          this.documentInfo = documentInfo[0];\n          this.organisationService.getOrganisationById(this.documentInfo.publisher).subscribe(orgInfo => {\n            if (length in orgInfo && orgInfo.length === 1) {\n              this.organisationInfo = orgInfo[0];\n              this.dataQualityFeedbackService.getValidationReport(id).subscribe(validationInfo => {\n                if (validationInfo) {\n                  this.validationReportResponse = validationInfo;\n                  this.validationReport = this.validationReportResponse.report;\n                  this.setData(null);\n                } else {\n                  this.documentInfo = undefined;\n                  this.validationReportResponse = undefined;\n                  this.loader.hide();\n                }\n                this.loader.hide();\n              });\n            } else {\n              this.documentInfo = undefined;\n              this.validationReportResponse = undefined;\n              this.loader.hide();\n            }\n          });\n        } else {\n            this.documentInfo = undefined;\n            this.validationReportResponse = undefined;\n            this.loader.hide();\n        }\n      });\n    }\n  }\n\n  setData(data: any) {\n    this.fileType = this.validationReport.fileType;\n    if ('url' in this.documentInfo) {\n      this.fileName = this.documentInfo.url.split('/').pop();\n    } else {\n      this.fileName = 'No filename available';\n    }\n\n    this.fileErrors = this.validationReport.errors.reduce((acc, actOrgFile) => {\n      if (actOrgFile.identifier === 'file') {\n         return actOrgFile.errors;\n        }\n      return acc;\n    }, []);\n    this.fileErrorsOriginal = [...this.fileErrors];\n\n    this.activityErrors = this.validationReport.errors.filter((actOrgFile) => actOrgFile.identifier !== 'file');\n    this.activityErrorsOriginal = [...this.activityErrors];\n\n    this.loadCategories();\n\n    this.loadTypeMessages(this.validationReport.errors);\n\n    this.filterActivities();\n\n    this.loader.hide();\n  }\n\n  loadCategories() {\n\n    const uniqueCat: { id: string; name: string }[] = [];\n\n    this.validationReport.errors.forEach(actOrgFile => {\n      actOrgFile.errors.forEach(error => {\n        if (uniqueCat.some(u => u.id === error.category)) {\n          //nothing\n        } else {\n          uniqueCat.push({ id: error.category, name: this.dataQualityFeedbackService.getCategoryLabel(error.category) });\n        }\n      });\n    });\n\n    uniqueCat.forEach(u => {\n      this.categories.push({ id: u.id, name: u.name, count: null, order: 0, show: true });\n    });\n  }\n\n  loadTypeMessages(errors: any[]) {\n    const types: { sev: string; id: string; text: string }[] = [];\n    // Get unique messages, with the highest level of severity\n    errors.forEach(actOrgFile => {\n      actOrgFile.errors.forEach(errorCat => {\n        errorCat.errors.forEach(error => {\n          const { message, severity, id } = error;\n          if (!types.some(t => t.id === id)) {\n            const newType: { sev: string; id: string; text: string } = { sev: '', id: '', text: '' };\n            newType.sev = severity;\n            newType.id = id;\n            newType.text = message;\n            types.push(newType);\n          }\n        });\n      });\n    });\n\n    // push the messages in the severity it belongs to\n    types.forEach(t => {\n      const sev = this.severities.find(s => s.id === t.sev);\n      if (sev !== undefined) {\n        sev.types.push({ id: t.id, text: t.text, show: true });\n      }\n\n    });\n\n  }\n\n  filterActivities() {\n    this.loader.show();\n    let filtered = JSON.parse(JSON.stringify(this.activityErrorsOriginal));\n\n    this.filterCompanyFeedback();\n\n    // Filter feedback category\n    filtered.forEach(act => {\n      act.errors = act.errors.filter(this.filterCategory);\n    });\n\n    // Filter messages that are not selected in source\n    // filtered.forEach(act => {\n    //   act.errors.forEach(fb => {\n    //     fb.errors.forEach(mes => {\n    //       mes.rulesets = mes.rulesets.filter(this.filterSource);\n    //     });\n    //   });\n    // });\n\n    // Filter type messages selected\n    filtered.forEach(act => {\n      act.errors.forEach(fb => {\n        fb.errors = fb.errors.filter(this.filterTypeMessage);\n      });\n    });\n\n    // Filter messages with severity selected\n    filtered.forEach(act => {\n      act.errors.forEach(fb => {\n        fb.errors = fb.errors.filter(this.filterSeverity);\n      });\n    });\n\n    // Filter feedback whitout messages\n    filtered.forEach(act => {\n      act.errors = act.errors.filter(fb => fb.errors.length > 0);\n    });\n\n    // Filter activities without feedback\n    filtered = filtered.filter(act => act.errors.length > 0);\n\n    this.activityErrors = filtered;\n    // set count on filter items\n    this.setSeverityCount();\n    this.setCategoryCount();\n    this.setTypeMessageCount();\n    this.loader.hide();\n  }\n\n  filterCompanyFeedback() {\n    let filteredFeedback = JSON.parse(JSON.stringify(this.fileErrorsOriginal));\n\n    // Filter feedback category\n    filteredFeedback = filteredFeedback.filter(this.filterCategory);\n\n    // Filter messages that are not selected in source\n    // filteredFeedback.forEach(fb => {\n    //   fb.errors.forEach(mes => {\n    //     mes.rulesets = mes.rulesets.filter(this.filterSource);\n    //   });\n    // });\n\n    // Filter type messages selected\n    filteredFeedback.forEach(fb => {\n      fb.errors = fb.errors.filter(this.filterTypeMessage);\n    });\n\n    // Filter errors with severity selected\n    filteredFeedback.forEach(fb => {\n      fb.errors = fb.errors.filter(this.filterSeverity);\n    });\n\n    // Filter feedback without errors\n    filteredFeedback = filteredFeedback.filter(fb => fb.errors.length > 0);\n\n    // Filter activities without feedback\n    this.fileErrors = filteredFeedback;\n  }\n\n  filterSeverity = (message: Message) =>\n    this.severities.some(sev => sev.show === true && sev.slug === message.severity);\n\n  filterSource = (ruleset: Ruleset) => this.sources.some(s => s.show === true && s.slug === ruleset.src);\n\n  filterCategory = (feedback: Feedback) => this.categories.some(c => c.show === true && c.id === feedback.category);\n\n  filterTypeMessage = (message: Message) =>\n    // return this.typeMessages.some(t => t.types.some(m => m.show === true && m.id === message.id ) );\n    this.severities.some(t => t.types.some(m => m.show === true && m.id === message.id))\n  ;\n\n  // Set the count of messages to the severity\n  setSeverityCount() {\n    this.severities.forEach(sev => {\n      sev.count = sev.show ? this.getIssueCount(sev.slug) : null;\n    });\n  }\n\n  getIssueCount(severity: string): number {\n    let count = 0;\n    this.activityErrors.forEach(act => {\n      act.errors.forEach(fb => {\n        fb.errors.forEach(mes => {\n          if (mes.severity === severity) {\n            count += mes.context.length;\n          }\n        });\n      });\n    });\n\n    this.fileErrors.forEach(fb => {\n      fb.errors.forEach(mes => {\n        if (mes.severity === severity) {\n          count += mes.context.length;\n        }\n      });\n    });\n    return count;\n  }\n\n  setCategoryCount() {\n    this.categories.forEach(cat => {\n      cat.count = cat.show ? this.getCategoryCount(cat.id) : null;\n    });\n  }\n\n  getCategoryCount(id: string): number {\n    let count = 0;\n    this.validationReport.errors.forEach(actOrgFile => {\n      actOrgFile.errors.forEach(errorCatGroup => {\n        if (errorCatGroup.category === id) {\n          count += errorCatGroup.errors.length;\n        }\n      });\n    });\n\n    return count;\n  }\n\n  // Set the count of the type-messages and sort types by count desc\n  setTypeMessageCount() {\n    this.severities.forEach(t => {\n      t.types.forEach(m => {\n        m.count = m.show ? this.getTypeMessageCount(m.id) : null;\n      });\n    });\n    // Sort Type messages inside severity. Type with more messages on top\n    this.severities.forEach(s => {\n      s.types.sort((a, b) => b.count - a.count);\n    });\n  }\n\n  getTypeMessageCount(typeId: string): number {\n    let count = 0;\n\n    this.validationReport.errors.forEach(actOrgFile => {\n      actOrgFile.errors.forEach(errorCatGroup => {\n        errorCatGroup.errors.forEach((error) => {\n          const { id } = error;\n          if (typeId === id) {\n            count += 1;\n          }\n        });\n      });\n    });\n\n    return count;\n  }\n\n  severitySelectedChanged() {\n    this.filterActivities();\n  }\n\n  sourceSelectedChanged() {\n    this.filterActivities();\n  }\n\n  categorySelectedChanged() {\n    this.filterActivities();\n  }\n\n  typesSelectedChanged() {\n    this.filterActivities();\n  }\n\n  getfeedbackSeverity(message: Message): string {\n    if (message.severity === 'error') {\n      return 'error';\n    } else if (message.severity === 'critical') {\n      return 'critical';\n    } else if (message.severity === 'warning') {\n      return 'warning';\n    } else if (message.severity === 'info') {\n      return 'improvement';\n    } else if (message.severity === 'success') {\n      return 'notification';\n    } else {\n      return 'other';\n    }\n\n  }\n\n  // addCountContextFunctions() {\n  //   this.dqfs.activities.forEach( act => {\n  //     act.feedback.forEach(fb => {\n\n  //       fb.countContext = function () {\n  //         let count = 0;\n  //         fb.messages.forEach( mes => {\n  //           count += mes.countContext();\n  //         });\n  //         return count;\n  //        } ;\n\n  //       fb.messages.forEach(mes => {\n  //         mes.countContext = function () { return mes.context.length; };\n  //       });\n  //     });\n  //   });\n  // }\n\n  goBack() {\n    this.location.back();\n  }\n}\n","<div class=\"xml-feedback\">\n\n<div class=\"feedback-heading row\">\n        <div class=\"col title-col\" (click)=\"collapse()\">\n          <h5 class=\"feedback-single-title title d-inline\" >{{title}}</h5>\n          <div class=\"d-inline float-right\" *ngIf=\"feedbackData.length>0\">\n            <!-- <span class=\"identifier-link\"><a href=\"{{getLinkDportal(activity.publisher, cleanIdentifier(activity.identifier))}}\" target=\"_blank\" >{{ cleanIdentifier(activity.identifier)}}</a></span> -->\n            <span class=\"badge badge-critical\" *ngIf=\"getIssueCount('critical')>0\">{{getIssueCount('critical')}}</span>\n            <span class=\"badge badge-danger\" *ngIf=\"getIssueCount('error')>0\">{{getIssueCount('error')}}</span>\n            <span class=\"badge badge-warning\" *ngIf=\"getIssueCount('warning')>0\">{{getIssueCount('warning')}}</span>\n            <span class=\"badge badge-info\" *ngIf=\"getIssueCount('info')>0\">{{getIssueCount('info')}}</span>\n            <span class=\"badge badge-success\" *ngIf=\"getIssueCount('success')>0\">{{getIssueCount('success')}}</span>\n          </div>\n        </div>\n        <div class=\"col-auto collapse-col\" (click)=\"collapse()\">\n            <button type=\"button\" class=\"btn btn-outline-secondary collapser\" >\n              <span *ngIf=\"!isCollapsed\"><img src=\"assets/icons/arrow_down_24.svg\" alt=\"icon arrow down\"></span>\n              <span *ngIf=\"isCollapsed\" > <img src=\"assets/icons/arrow_up_24.svg\" alt=\"icon arrow up\"> </span>\n            </button>\n        </div>\n    \n      </div>\n      <div class=\"feedback-items\" [ngbCollapse]=\"isCollapsed\" *ngIf=\"feedbackData.length>0;else noFeedbackData\">\n        <app-feedback-item *ngFor=\"let fb of feedbackData\" [feedback]=\"fb\"></app-feedback-item>\n      </div>\n      </div>\n\n      <ng-template #noFeedbackData>\n        <p>There is no {{item}} file feedback to display</p>\n      </ng-template>\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Feedback } from '../shared/feedback';\n\n@Component({\n  selector: 'app-single-feedback',\n  templateUrl: './single-feedback.component.html',\n  styleUrls: ['./single-feedback.component.scss']\n})\nexport class SingleFeedbackComponent implements OnInit {\n  @Input() feedbackData: Feedback[] = [];\n  @Input() title = '';\n  @Input() item = 'activity';\n  @Input() items = 'activities';\n  public isCollapsed = false;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  getIssueCount(type: string): number {\n    let count = 0;\n\n    this.feedbackData.forEach(catGroup => {\n      catGroup.errors.forEach(err => {\n        if (err.severity === type) {\n          count += err.context.length;\n        }\n      });\n    });\n    return count;\n  }\n\n  collapse() {\n    this.isCollapsed = ! this.isCollapsed;\n  }\n}\n","<div class=\"feedback-group\">\n  <div class=\"feedback-heading row\">\n    <div class=\"col title-col\" (click)=\"collapse()\">\n      <div class=\"title-col__title-label\">{{item | titlecase}} title</div>\n      <h5 class=\"feedback-group-title title d-inline\" >{{ activity.title }}</h5>\n      <div class=\"d-inline float-right\">\n        <span class=\"identifier-link\"><a href=\"{{getLinkDportal(activity.publisher, cleanIdentifier(activity.identifier))}}\"\n          title=\"Open this {{item}} in d-portal\" \n          target=\"_blank\" (click)=\"$event.stopPropagation()\">{{ cleanIdentifier(activity.identifier)}}</a></span>\n        <span class=\"badge badge-critical\" *ngIf=\"getIssueCount('critical')>0\">{{getIssueCount('critical')}}</span>\n        <span class=\"badge badge-danger\" *ngIf=\"getIssueCount('error')>0\">{{getIssueCount('error')}}</span>\n        <span class=\"badge badge-warning\" *ngIf=\"getIssueCount('warning')>0\">{{getIssueCount('warning')}}</span>\n        <span class=\"badge badge-info\" *ngIf=\"getIssueCount('info')>0\">{{getIssueCount('info')}}</span>\n        <span class=\"badge badge-success\" *ngIf=\"getIssueCount('success')>0\">{{getIssueCount('success')}}</span>\n      </div>\n    </div>\n    <div class=\"col-auto collapse-col\" (click)=\"collapse()\">\n        <button type=\"button\" class=\"btn btn-outline-secondary collapser\" >\n          <span *ngIf=\"!isCollapsed\"><img src=\"assets/icons/arrow_down_24.svg\" alt=\"icon arrow down\"></span>\n          <span *ngIf=\"isCollapsed\" > <img src=\"assets/icons/arrow_up_24.svg\" alt=\"icon arrow up\"> </span>\n        </button>\n    </div>\n\n  </div>\n  <div class=\"feedback-items\" [ngbCollapse]=\"isCollapsed\">\n    <app-feedback-item *ngFor=\"let fb of activity.errors\" [feedback]=\"fb\" ></app-feedback-item>\n  </div>  \n</div>\n\n\n\n","import { Component, OnInit, Input } from '@angular/core';\n\nimport { LogService } from './../../../core/logging/log.service';\nimport { Dqfs, Activity } from './../shared/feedback';\n\n@Component({\n  selector: 'app-feedback-group',\n  templateUrl: './feedback-group.component.html',\n  styleUrls: ['./feedback-group.component.scss']\n})\nexport class FeedbackGroupComponent implements OnInit {\n  @Input() activity: Activity;\n  @Input() item: 'activity' | 'organisation';\n  @Input() items: 'activities' | 'organisations';\n  @Input() dqfs: Dqfs;\n\n  public isCollapsed = false;\n\n  constructor(private logger: LogService) { }\n\n  ngOnInit() {\n  }\n\n  collapse() {\n    this.isCollapsed = !this.isCollapsed;\n  }\n\n  getLinkDportal(publisher: string, activity: string) {\n    if (this.dqfs && this.dqfs.filetype === 'iati-organisations') {\n      return `http://d-portal.org/ctrack.html?publisher=${encodeURIComponent(publisher)}`;\n    } else {\n      return `http://d-portal.org/ctrack.html?publisher=${encodeURIComponent(publisher)}#view=act&aid=${encodeURIComponent(activity)}`;\n    }\n  }\n\n  getIssueCount(type): number {\n    let count = 0;\n\n    this.activity.errors.forEach(fb => {\n      fb.errors.forEach(mes => {\n        if (mes.severity === type) {\n          // const override = this.overrideGuidanceLink(mes.id);\n\n          // if (override != null) {\n          //   mes.rulesets.forEach(ruleset => {\n          //     ruleset['href'] = override;\n          //   });\n          // }\n\n          count += mes.context.length;\n        }\n      });\n    });\n    return count;\n  }\n\n  // clean identiefier that contain new line breaks.\n  // Delete the part from and after the line break.\n  cleanIdentifier(identifier: string): string {\n    const newLineFound = identifier.indexOf('\\n');\n    if (newLineFound >= 0) {\n      return identifier.substring(0, newLineFound);\n    } else {\n      return identifier;\n    }\n  }\n\n  // This is a hack to overcome the guidance links being hardcoded into the repos\n  // and then baked into the thousands of reports. Done properly in V2\n  overrideGuidanceLink(code) {\n    const overrides = {\n      '102.1.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '103.1.1': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '106.1.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/',\n      '11.1.2': 'https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/',\n      '11.1.3': 'https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/',\n      '11.1.4': 'https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/',\n      '11.1.5': 'https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/',\n      '11.2.1': 'https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/',\n      '11.2.2': 'https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/',\n      '11.3.1': 'https://iatistandard.org/en/guidance/standard-guidance/organisation-budgets-spend/',\n      '12.1.1': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '12.1.2': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '12.3.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '12.3.2': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '12.4.1': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '2.1.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '2.1.2': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '2.1.4': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '2.2.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '3.1.1': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '3.1.2': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '3.1.4': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '3.4.1': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '3.4.2': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '3.4.4': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '3.6.2': 'https://iatistandard.org/en/guidance/standard-guidance/financial-transactions/',\n      '3.7.1': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '3.7.2': 'https://iatistandard.org/en/guidance/standard-guidance/countries-regions/',\n      '6.1.5': 'https://iatistandard.org/en/guidance/standard-guidance/related-documents/',\n      '6.10.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-participants/',\n      '6.11.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/',\n      '6.13.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/',\n      '6.14.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-classifications/',\n      '6.2.1': 'https://iatistandard.org/en/guidance/standard-guidance/activity-dates-status/',\n      '6.2.2': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '6.6.2': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '6.7.2': 'https://iatistandard.org/en/guidance/standard-guidance/activity-thematic-focus/',\n      '7.5.2': 'https://iatistandard.org/en/guidance/standard-guidance/activity-budgets/',\n      '7.5.3': 'https://iatistandard.org/en/guidance/standard-guidance/activity-budgets/',\n      '8.6.3': 'https://iatistandard.org/en/guidance/standard-guidance/organisation-budgets-spend/'\n    };\n\n    if (code in overrides) {\n      return overrides[code];\n    }\n\n    return null;\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { TypeMessage } from './../shared/type-message';\nimport { TypeSeverity } from './../shared/type-severity';\n\n\n@Component({\n  selector: 'app-filter-type',\n  templateUrl: './filter-type.component.html',\n  styleUrls: ['./filter-type.component.scss']\n})\nexport class FilterTypeComponent implements OnInit {\n  @Input() types: TypeSeverity[] = [];\n  @Output() selectedChanged = new EventEmitter<string>();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  allSelected(): boolean {\n    return this.types.every(x => x.types.every(y => y.show === true) );\n }\n\n  selectionChanged() {\n    this.selectedChanged.emit('');\n  }\n\n  selectAll(): void {\n    this.types.forEach(x => x.types.forEach(t => t.show = true ));\n    this.selectionChanged();\n  }\n}\n","<div class=\"filter\">\n  <ul class=\"list-group\">\n    <li class=\"list-group-item caption\">\n      <div class=\"title\">Types</div>\n      <span *ngIf=\"allSelected()\" class=\"show-label\">Show/hide</span>\n      <span *ngIf=\"!allSelected()\" class=\"show-label\"><button type=\"button\" class=\"btn btn-link\" (click)=\"selectAll()\">Select all</button></span>\n    </li>\n    <app-filter-type-severity *ngFor=\"let item of types\" [type]=\"item\" (selectedChanged)=\"selectionChanged()\"  ></app-filter-type-severity>\n  </ul>\n</div>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { Source } from './../shared/source';\n\n@Component({\n  selector: 'app-filter-source',\n  templateUrl: './filter-source.component.html',\n  styleUrls: ['./filter-source.component.scss']\n})\nexport class FilterSourceComponent implements OnInit {\n  @Input() sources: Source[] = [];\n  @Output() selectedChanged = new EventEmitter<string>();\n\n  constructor() { }\n\n  ngOnInit() {\n    console.log(this.sources);\n  }\n\n  allSelected(): boolean {\n    return this.sources.every(x => x.show === true);\n }\n\n  selectionChanged() {\n    this.selectedChanged.emit('');\n  }\n\n  selectAll(): void {\n    this.sources.forEach(x => x.show = true);\n    this.selectionChanged();\n  }\n\n}\n","<div class=\"filter\">\n  <ul class=\"list-group\">\n    <li class=\"list-group-item caption\">\n      <div class=\"title\">Guidelines</div>\n      <span *ngIf=\"!allSelected()\" class=\"show-label\"><button type=\"button\" class=\"btn btn-link\" (click)=\"selectAll()\">Select all</button></span>\n    </li>\n    <li *ngFor=\"let cat of sources\" class=\"list-group-item\">\n      <span class=\"severity-count\">{{cat.count}}</span>\n      <span [ngClass]=\"{'unselected': !cat.show }\">{{ cat.name }}</span>\n      <span class=\"select\">\n        <app-checkbox [(checked)]=\"cat.show\" [name]=\"'filterSrc' + cat.name\" (checkedChange)=\"selectionChanged()\"></app-checkbox>\n      </span>\n    </li>\n  </ul>\n</div>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { Category } from './../shared/category';\n\n@Component({\n  selector: 'app-filter-category',\n  templateUrl: './filter-category.component.html',\n  styleUrls: ['./filter-category.component.scss']\n})\nexport class FilterCategoryComponent implements OnInit {\n  @Input() categories: Category[] = [];\n  @Output() selectedChanged = new EventEmitter<string>();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  allSelected(): boolean {\n    return this.categories.every(x => x.show === true);\n }\n\n  selectionChanged() {\n    this.selectedChanged.emit('');\n  }\n\n  selectAll(): void {\n    this.categories.forEach(x => x.show = true);\n    this.selectionChanged();\n  }\n\n}\n","<div class=\"filter\">\n  <ul class=\"list-group\">\n    <li class=\"list-group-item caption\">\n      <div class=\"title\">View by category</div>\n      <span *ngIf=\"!allSelected()\" class=\"show-label\"><button type=\"button\" class=\"btn btn-link\" (click)=\"selectAll()\">Select all</button></span>\n    </li>\n    <li *ngFor=\"let cat of categories\" class=\"list-group-item\">\n      <span class=\"severity-count\">{{cat.count}} x</span>\n      <span [ngClass]=\"{'unselected': !cat.show}\">{{ cat.name }}</span>\n      <span class=\"select\">\n        <app-checkbox [(checked)]=\"cat.show\" [name]=\"'filterCat' + cat.name\" (checkedChange)=\"selectionChanged()\"></app-checkbox>\n      </span>\n    </li>\n  </ul>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { GtagModule } from 'angular-gtag';\n\n\nimport { DataQualityFeedbackService } from './shared/data-quality-feedback.service';\nimport { OrganisationService } from 'src/app/organisation/shared/organisation.service';\nimport { MainComponent } from './main/main.component';\nimport { FilterSeverityComponent } from './filter-severity/filter-severity.component';\nimport { FilterSourceComponent } from './filter-source/filter-source.component';\nimport { FilterTypeComponent } from './filter-type/filter-type.component';\nimport { FeedbackGroupComponent } from './feedback-group/feedback-group.component';\nimport { FeedbackItemComponent } from './feedback-item/feedback-item.component';\nimport { CheckboxComponent } from './shared/checkbox/checkbox.component';\nimport { FilterCategoryComponent } from './filter-category/filter-category.component';\nimport { FilterTypeMessageComponent } from './filter-type-message/filter-type-message.component';\nimport { FilterTypeSeverityComponent } from './filter-type-severity/filter-type-severity.component';\nimport { FilterSeverityItemComponent } from './filter-severity-item/filter-severity-item.component';\nimport { MainReportInfoComponent } from './main-report-info/main-report-info.component';\nimport { SharedModule } from './../../shared/shared.module';\nimport { SingleFeedbackComponent } from './single-feedback/single-feedback.component';\nimport { IatiInfoComponent } from './iati-info/iati-info.component';\nimport { ValidateIatiModule } from '../../validate-iati/validate-iati.module';\nimport { MultiFeedbackComponent } from './multi-feedback/multi-feedback.component';\nimport { AboutComponent } from './about/about.component';\n\nconst routes: Routes = [\n  { path: 'files/:id', component: MainComponent },\n  { path: '', redirectTo: '/404dqf' , pathMatch: 'full' },\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    FormsModule,\n    NgbModule,\n    SharedModule,\n    ValidateIatiModule,\n    GtagModule\n  ],\n  exports: [\n    RouterModule\n  ],\n  declarations: [\n    MainComponent,\n    // AboutComponent,\n    FilterSeverityComponent,\n    FilterSourceComponent,\n    FilterTypeComponent,\n    FeedbackGroupComponent,\n    FeedbackItemComponent,\n    MultiFeedbackComponent,\n    CheckboxComponent,\n    FilterCategoryComponent,\n    FilterTypeMessageComponent,\n    FilterTypeSeverityComponent,\n    FilterSeverityItemComponent,\n    MainReportInfoComponent,\n    SingleFeedbackComponent,\n    IatiInfoComponent],\n    providers: [DataQualityFeedbackService, OrganisationService]\n})\nexport class DataQualityFeedbackModule { }\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { Severity } from '../shared/severity';\n\n@Component({\n  selector: 'app-filter-severity',\n  templateUrl: './filter-severity.component.html',\n  styleUrls: ['./filter-severity.component.scss']\n})\nexport class FilterSeverityComponent implements OnInit {\n  @Input() severities: Severity[] = [];\n  @Output() selectedChanged = new EventEmitter<string>();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  allSelected(): boolean {\n    return this.severities.every(x => x.show === true);\n  }\n\n  selectionChanged() {\n    this.selectedChanged.emit('');\n  }\n\n  selectAll(): void {\n    this.severities.forEach(x => x.show = true);\n    this.selectionChanged();\n  }\n\n}\n","<div class=\"filter\">\n  <ul class=\"list-group\">\n    <li class=\"list-group-item caption\">\n      <div class=\"title\">View by message type</div>\n      <span  class=\"show-label text-muted\">Click to show or hide individual message types.</span>\n      <!-- <span *ngIf=\"allSelected()\" class=\"show-label\">Show/hide</span>\n      <span *ngIf=\"!allSelected()\" class=\"show-label\"><button type=\"button\" class=\"btn btn-link\" (click)=\"selectAll()\">Select all</button></span> -->\n    </li>\n    <app-filter-severity-item *ngFor=\"let sev of severities\" [severity]=\"sev\" (selectedChanged)=\"selectionChanged()\"></app-filter-severity-item>\n  </ul>\n</div>\n","import { Organisation } from './../../../shared/organisation';\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport { LogService } from '../../../core/logging/log.service';\nimport { Source } from './source';\nimport { Severity } from './severity';\nimport { Dqfs } from './feedback';\nimport { IatiDataset } from './../../../organisation/shared/iati-dataset';\nimport { ReportInfo } from './report-info';\n\n\n@Injectable()\nexport class DataQualityFeedbackService {\n  private urlApiIatiFile: string = window.__env.apiDataworkBench + '/iati-files';\n  private urlApiIatiTestFile: string = window.__env.apiDataworkBench + '/iati-testfiles';\n  private urlApiIatiDataSet: string = window.__env.apiDataworkBench + '/iati-datasets';\n  private urlApiOrganisation: string = window.__env.apiDataworkBench + '/iati-publishers';\n  private urlApiValidationReport: string = window.__env.validatorServicesUrl + '/pub/validation/existing';\n\n  constructor(private http: HttpClient,\n    private logger: LogService) { }\n\n  getValidationReport(documentId: string): Observable<any> {\n    const url: string = this.urlApiValidationReport + '?id=' + documentId;\n    return this.http.get<any>(url)\n    .pipe(\n      catchError(this.handleError('getValidationReport', undefined) as any)\n    );\n  }\n\n  getDataQualityFeedback(md5: string): Observable<Dqfs> {\n    const url: string = this.urlApiIatiFile + '/file/json/' + md5 + '.json';\n    //   /iati-files/{container}/download/{file}\n    return this.http.get<any>(url)\n      .pipe(\n        // tap(_ => this.log(`fetched iati file`)),\n        catchError(this.handleError('getIatiFile', undefined) as any)\n      );\n  }\n\n  getTestFilesDataQualityFeedbackById(inId: string): Observable<Dqfs> {\n    const url: string = this.urlApiIatiTestFile + '/file/json/' + inId + '.json';\n    //   /iati-testfiles/{container}/download/{file}\n    return this.http.get<any>(url)\n      .pipe(\n        // tap(_ => this.log(`fetched iati file`)),\n        catchError(this.handleError('getIatiFile', undefined) as any)\n      );\n  }\n\n  getReportInfo(id: string): Observable<ReportInfo> {\n    const reportInfo: ReportInfo = { organisationName: '', fileName: '', organisationSlug: '' };\n\n    const url: string = this.urlApiIatiDataSet + '/findOne/' + '?filter[where][id]=' + id;\n    this.http.get<IatiDataset>(url)\n      .subscribe(\n        (data: any) => {\n          reportInfo.fileName = data.filename;\n          reportInfo.organisationSlug = data.publisher;\n          const urlPublisher: string = this.urlApiOrganisation + '/findOne/' + '?filter[where][slug]=' + data.publisher;\n          this.http.get<Organisation>(urlPublisher)\n            .subscribe(\n              (datas: any) => {\n                reportInfo.organisationName = datas.name;\n                return of(reportInfo);\n              }\n            );\n        }\n      );\n    return of(reportInfo);\n  }\n\n  getSeverities(): Severity[] {\n    return [\n      {\n        id: 'critical',\n        slug: 'critical',\n        name: 'Critical',\n        description: 'Files with critical errors will not be processed by the datastore',\n        count: null,\n        order: 1,\n        show: true,\n        types: []\n      },\n      {\n        id: 'error',\n        slug: 'error',\n        name: 'Errors',\n        description: 'Errors make it hard or impossible to use the data.',\n        count: null,\n        order: 2,\n        show: true,\n        types: []\n      },\n      {\n        id: 'warning',\n        slug: 'warning',\n        name: 'Warnings',\n        description: 'Warnings indicate where the data can be more valuable.',\n        count: null,\n        order: 3,\n        show: true,\n        types: []\n      },\n      {\n        id: 'improvement',\n        slug: 'info',\n        name: 'Improvements',\n        description: 'Improvements can make the data more useful.',\n        count: null,\n        order: 4,\n        show: true,\n        types: []\n      },\n      {\n        id: 'notification',\n        slug: 'success',\n        name: 'Notifications',\n        description: 'Notifications are for your information.',\n        count: null,\n        order: 5,\n        show: true,\n        types: []\n      },\n    ];\n  }\n\n  getSources(): Source[] {\n    return [\n      { id: 'iati', slug: 'iati', name: 'IATI Standard', count: null, order: 1, show: true },\n      {\n        id: 'minbuza',\n        slug: 'minbuza',\n        name: 'Netherlands: Ministry of Foreign Affairs additional rules',\n        count: null,\n        order: 2,\n        show: true\n      },\n      {\n        id: 'dfid',\n        slug: 'dfid',\n        name: 'UK: Department for International Development (DFID) additional rules',\n        count: null,\n        order: 3,\n        show: true\n      },\n      { id: 'practice', slug: 'practice', name: 'Common practice', count: null, order: 4, show: true },\n      { id: 'iati-doc', slug: 'iati-doc', name: 'IATI Standard (additional)', count: null, order: 5, show: true },\n    ];\n  }\n\n  getCategoryLabel(category: string): string {\n    const categories = {\n      schema: 'Schema',\n      information: 'Basic activity information',\n      financial: 'Financial',\n      identifiers: 'Identification',\n      organisation: 'Basic organisation information',\n      participating: 'Participating organisations',\n      geo: 'Geopolitical information',\n      classifications: 'Classifications',\n      documents: 'Related documents',\n      performance: 'Performance',\n      iati: 'IATI file'\n    };\n    return categories[category];\n  }\n\n  /**\n   * Handle Http operation that failed.\n   * Let the app continue.\n   *\n   * @param operation - name of the operation that failed\n   * @param result - optional value to return as the observable result\n   */\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n\n      // TODO: send the error to remote logging\n      this.logger.error(error);\n      // console.error(error); // log to console instead\n\n      // TODO: better job of transforming error for user consumption\n      // this.log(`${operation} failed: ${error.message}`);\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\n\nimport { TypeMessage } from './../shared/type-message';\nimport { TypeSeverity } from './../shared/type-severity';\n\n@Component({\n  selector: 'app-filter-type-message',\n  templateUrl: './filter-type-message.component.html',\n  styleUrls: ['./filter-type-message.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FilterTypeMessageComponent implements OnInit {\n  @Input() typeMessage: TypeMessage;\n  @Output() selectedChanged = new EventEmitter<string>();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  selectionChanged() {\n    console.log('typeMessage: ', this.typeMessage);\n    this.selectedChanged.emit('');\n  }\n\n}\n","<li *ngIf=\"typeMessage\" class=\"list-group-item\">\n  <span class=\"severity-count\">{{typeMessage.count}} x</span>\n  <span [ngClass]=\"{'unselected': !typeMessage?.show}\">{{ typeMessage.text}}</span>\n  <span class=\"select\">\n    <app-checkbox [(checked)]=\"typeMessage.show\" [name]=\"'filterTypeMsg' + typeMessage.text + typeMessage.id\" (checkedChange)=\"selectionChanged()\"></app-checkbox>\n  </span>\n</li>\n","import { Component, Input, QueryList, ViewChildren } from '@angular/core';\nimport { FeedbackGroupComponent } from '../feedback-group/feedback-group.component';\nimport { Activity, Dqfs } from '../shared/feedback';\n\n\n@Component({\n  selector: 'app-multi-feedback',\n  templateUrl: './multi-feedback.component.html',\n  styleUrls: ['./multi-feedback.component.scss']\n})\nexport class MultiFeedbackComponent {\n  @Input() activityData: Activity[] = [];\n  @Input() title = '';\n  @Input() item: 'activity' | 'organisation' = 'activity';\n  @Input() items: 'activities' | 'organisations' = 'activities';\n  @Input() dqfs: Dqfs | undefined; // TODO: verify undefined type\n  @ViewChildren(FeedbackGroupComponent) groups: QueryList<FeedbackGroupComponent> | undefined; // TODO: verify undefined type\n  isCollapsed = false;\n\n  constructor() { }\n\n  toggleCollapse() {\n    this.isCollapsed = !this.isCollapsed;\n    this.groups?.forEach(x => x.isCollapsed = this.isCollapsed);\n  }\n}\n","<div class=\"feedback\">\n    <h5 class=\"title feedback-title\">\n        {{title}}\n        <span class=\"toggle-collapse\">\n            <button type=\"button\" class=\"btn btn-link\" (click)=\"toggleCollapse()\">\n                Collapse/expand all {{items}}\n            </button>\n        </span>\n    </h5>\n    <div *ngIf=\"activityData.length>0; else noActivityData\">\n        <app-feedback-group *ngFor=\"let act of activityData\" [activity]=\"act\" [item]=\"item\" [items]=\"items\" [dqfs]=\"dqfs\"></app-feedback-group>\n    </div>\n</div>\n\n<ng-template #noActivityData>\n    <p>There is no feedback to display</p>\n</ng-template>\n"]}