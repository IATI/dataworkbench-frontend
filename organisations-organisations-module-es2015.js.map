{"version":3,"sources":["./src/app/organisations/organisations-list-item/organisations-list-item.component.ts","./src/app/organisations/organisations-list-item/organisations-list-item.component.html","./src/app/organisations/organisations.module.ts","./src/app/organisations/organisations/organisations.component.html","./src/app/organisations/organisations/organisations.component.ts","./src/app/organisations/organisations-search/organisations-search.component.ts","./src/app/organisations/organisations-search/organisations-search.component.html","./src/app/organisations/organisations-list/organisations-list.component.html","./src/app/organisations/organisations-list/organisations-list.component.ts"],"names":[],"mappings":"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","file":"organisations-organisations-module-es2015.js","sourcesContent":["import { Organisation } from '../../shared/organisation';\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-organisations-list-item',\n  templateUrl: './organisations-list-item.component.html',\n  styleUrls: ['./organisations-list-item.component.scss']\n})\nexport class OrganisationsListItemComponent implements OnInit {\n  @Input() organisation!: Organisation ;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<div class=\"row organisation\">\n  <div class=\"col\">\n      <a [routerLink]=\"['/organisation/', organisation.name ]\" > {{ organisation.title }} </a>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OrganisationsComponent } from './organisations/organisations.component';\nimport { OrganisationsListComponent } from './organisations-list/organisations-list.component';\nimport { OrganisationsListItemComponent } from './organisations-list-item/organisations-list-item.component';\nimport { OrganisationsSearchComponent } from './organisations-search/organisations-search.component';\n\nimport { OrganisationsService } from './shared/organisations.service';\n\nconst routes: Routes = [\n  { path: '', component: OrganisationsComponent },\n  { path: '', redirectTo: '/404dqf' , pathMatch: 'full' },\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule\n  ],\n  exports: [\n    RouterModule\n  ],\n  declarations: [\n    OrganisationsComponent,\n    OrganisationsListComponent,\n    OrganisationsListItemComponent,\n    OrganisationsSearchComponent],\n  providers: [OrganisationsService]\n})\nexport class OrganisationsModule { }\n","<div class=\"container\">\n  <script>gtag('event', 'orgs-view');</script>\n  <h1>Public data viewer</h1>\n  <p>Search for an organisation and access the validation results on their public IATI data.\n    The organisation list and the public IATI data is regularly refreshed from the IATI Registry.\n    New organisations and IATI files will not immediately be visible here, but after at most a day.\n  </p>\n  <app-organisations-search (search)=\"searchOrganisation($event)\"></app-organisations-search>\n  <div *ngIf=\"isSearching\" class=\"text-info\">Searching ....</div>\n  <app-organisations-list [organisations]=\"filteredOrganisations\"></app-organisations-list>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { LogService } from '../../core/logging/log.service';\nimport { Organisation } from '../../shared/organisation';\nimport { LoaderService } from './../../core/loader/loader.service';\nimport { OrganisationsService } from './../shared/organisations.service';\n\n\n@Component({\n  selector: 'app-organisations',\n  templateUrl: './organisations.component.html',\n  styleUrls: ['./organisations.component.scss']\n})\nexport class OrganisationsComponent implements OnInit {\n  organisations: Organisation[] = [];\n  filteredOrganisations: Organisation[] = [];\n  isSearching = false;\n\n  constructor(private organisationService: OrganisationsService,\n    private logger: LogService,\n    private loader: LoaderService) { }\n\n  async ngOnInit() {\n    this.searchOrganisation('');\n  }\n\n  searchOrganisation(title: string) {\n    // this.logger.debug('Start searching organisations', title);\n    this.isSearching = true;\n    this.loader.show();\n    if (!this.organisations || this.organisations.length === 0) {\n      // get organisations from the web api\n      this.organisationService.getOrganisations()\n        .subscribe(org => this.organisations = org,\n          error => {\n            console.log(error); this.isSearching = false; this.loader.hide();\n          },\n          () => {\n            // finished fetching organisations from web api, filter the organisations by title\n            this.filterOrganisations(title);\n          });\n    } else {\n      // organisations already loaded, only apply filter\n      this.filterOrganisations(title);\n    }\n    // this.logger.debug('End searching organisations', title);\n  }\n\n  filterOrganisations(title: string) {\n    if (!title || !title.trim()) {\n      // return all organisations\n      this.filteredOrganisations = this.organisations.slice(0)\n        .sort((a, b) =>\n          // eslint-disable-next-line max-len\n          (a.title || '').toString().toLowerCase().localeCompare((b.title || '').toString().toLowerCase())\n        );\n    } else {\n      // filter organisations and save in filteredOrganisations\n      this.filteredOrganisations = this.organisations\n        .filter((org) => new RegExp(title, 'gi').test(org.title))\n        .sort((a, b) =>\n          // eslint-disable-next-line max-len\n          (a.title || '').toString().toLowerCase().localeCompare((b.title || '').toString().toLowerCase())\n        );\n    }\n    this.isSearching = false;\n    this.loader.hide();\n  }\n}\n","import { Component, OnInit, ViewChild, Output, EventEmitter, ElementRef } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-organisations-search',\n  templateUrl: './organisations-search.component.html',\n  styleUrls: ['./organisations-search.component.scss']\n})\nexport class OrganisationsSearchComponent implements OnInit {\n  @ViewChild('searchInput') searchInput: ElementRef;\n  @Output() search = new EventEmitter<string>();\n  term = new FormControl();\n\n  constructor() { }\n\n  ngOnInit() {\n    // Subscribe to changes in the search field and emit a search after 400 ms.\n    this.term.valueChanges\n      .pipe(debounceTime(300))\n      .pipe(distinctUntilChanged())\n      .subscribe(searchValue => this.searchOrganisations());\n      // .subscribe(t => this.search.emit(t));\n  }\n\n  searchOrganisations() {\n    this.search.emit(this.term.value);\n  }\n\n}\n","<div class=\"search-container\">\n  <div class=\"organisation-search-form\">\n    <!-- <input type=\"text\" #searchInput class=\"search-input\" placeholder=\"Organisation name\" (keyup)=\"searchOrganisations(searchInput.value)\" [(ngModel)]=\"searchInputTerm\"> -->\n    <input type=\"text\" #searchInput class=\"search-input\" placeholder=\"Organisation name\" [formControl]=\"term\" appAutofocus>\n    <button class=\"btn btn-primary iati-button\" (click)=\"searchOrganisations()\">Search</button>\n  </div>\n</div>\n","<div class=\"found-organization\">Found {{ organisations.length }} organisations.</div>\n<hr>\n<app-organisations-list-item *ngFor=\"let org of organisations\" [organisation]=\"org\"></app-organisations-list-item>\n\n\n","import { Organisation } from '../../shared/organisation';\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-organisations-list',\n  templateUrl: './organisations-list.component.html',\n  styleUrls: ['./organisations-list.component.scss']\n})\nexport class OrganisationsListComponent implements OnInit {\n  @Input() organisations: Organisation[] = [];\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n"],"sourceRoot":"webpack:///"}